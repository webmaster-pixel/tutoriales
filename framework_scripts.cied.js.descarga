/*! Copyright (c) 2025 NUSOFT SAS - www.educa.city. All Rights Reserved. Todos los derechos reservados. Prohibida la copia, almacenamiento o reproducciÃ³n total o parcial de este recurso. */
var ar_colors = new Array('#F7AC11','#279A8E','#008285','#005E76','#E97D6D','#002832','#39393A','#028BAE','#00ABAD','#2FBAAB','#E84434');var ar_colors_1 = new Array('#035163','#06454F','#05353A','#05282B','#08697F','#048E8E','#047575','#03605D','#000000','#034442','#02302D');var ar_colors_1_lg = new Array('#70D1E8','#88D8EA','#9DDBEA','#BEE2EA','#CDF1F7','#30C6C2','#81CACC','#9BC9C7','#AAAAAA','#A7ECFE','#B6EFFE');var ar_colors_2 = new Array('#003846','#00495B','#00596F','#006984','#007A98','#00665F','#007A72','#008F85','#00A398','#00B8AB','#00CCBE');var ar_colors_2_lg = new Array('#003846','#00495B','#00596F','#006984','#007A98','#00665F','#007A72','#008F85','#00A398','#00B8AB','#00CCBE');var ar_colors_3 = new Array('#C43927','#B83625','#AB3222','#9E2E20','#912A1D','#85271B','#782318','#00DBA1','#00CC95','#00BC8A','#00AD7F');var ar_colors_3_lg = new Array('#dddddd','#ffe6e6','#ffe6e6','#ffe6e6','#ffe6e6','#ffe6e6','#ffe6e6','#E1F4FA','#E1F4FA','#C7EBF5','#C7EBF5');var ar_colors_4 = new Array('#00AD7F','#279A8E','#008285','#005E76','#006984','#002832','#39393A','#028BAE','#00ABAD','#2FBAAB','#008AAC','#06454F','#05353A','#05282B','#08697F','#048E8E','#047575','#03605D','#034442','#02302D'); var ar_colors_5 = new Array('#C0392B','#E74C3C','#9B59B6','#8E44AD','#2980B9','#3498DB','#1ABC9C','#16A085','#27AE60','#2ECC71','#00AD7F','#F39C12','#E67E22','#D35400','#ECF0F1','#BDC3C7','#95A5A6','#7F8C8D','#34495E','#2C3E50');var _color = {luminance : function (e) {var col = e.hex;var amt = e.lum;var usePound = false;if (col[0] == "#") {col = col.slice(1);usePound = true;}; var num = parseInt(col,16); var r = (num >> 16) + amt; if (r > 255) r = 255;else if  (r < 0) r = 0; var b = ((num >> 8) & 0x00FF) + amt; if (b > 255) b = 255;else if  (b < 0) b = 0; var g = (num & 0x0000FF) + amt; if (g > 255) g = 255;else if (g < 0) g = 0; return (usePound?"#":"") + (g | (b << 8) | (r << 16)).toString(16);},is_valid(color){const hexRegex = /^#?([a-fA-F0-9]{6};|[a-fA-F0-9]{3})$/;return hexRegex.test(color);},z : ''};var _color_handler = {hex_to_rgb : function(hex) {var rgb = {r : 255,g : 255,b : 255};if(typeof(hex) != 'undefined' && hex != null && hex != ''){var pattern = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;var result = pattern.exec(hex);if(result != false){rgb = {r : parseInt(result[1], 16),g : parseInt(result[2], 16),b : parseInt(result[3], 16)}}};return rgb;},rgb_to_hex : function(rgb) {const result = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if (!result) return rgb;const r = parseInt(result[1]).toString(16).padStart(2, '0');const g = parseInt(result[2]).toString(16).padStart(2, '0');const b = parseInt(result[3]).toString(16).padStart(2, '0');return '#' + r + g + b;},z : ''};var _color_picker = {init : function(id,init_color){if(typeof(_color_picker_loaded) != 'undefined' && !$('#colorSelector_'+id).hasClass('colorSelectorReady')){$('#colorSelector_'+id).ColorPicker({color : init_color,onShow : function (colpkr) {$(colpkr).fadeIn(500);return false;},onHide : function (colpkr) {$(colpkr).fadeOut(500);return false;},onChange : function (hsb, hex, rgb) {$('#colorSelector_' + id + ' div').css('backgroundColor', '#' + hex);$('#colorSelector_' + id).parents('#tr_color').find('input[name=color]').val(hex);$('#colorSelector_' + id).parents('.one_input').find('input[name=color]').val(hex);}});$('#colorSelector_'+id).addClass('colorSelectorReady');}},z : ''};var _simple_color_picker = {set : function(e){let id = e.id;let color = e.color;let _scp = $('#' + id);let _input = _scp.siblings('span').find('input[name=color]');_scp.find('div.one_color_option').removeClass('selected');let _co = null;if(!_color.is_valid(color)){_co = _scp.find('div.one_color_option[color='+color+']');}else{_co = _scp.find('div.one_color_option').first();color = _co.attr('color');};_co.addClass('selected');_input.val(color);},get_number_by_color : function(e){let id = e.id;let _scp = $('#' + id);let _co = _scp.find('div.one_color_option');let number  = 0;e.color = e.color.replace('#','');_co.each(function(){let _c = $(this);if(_c.attr('dark') == e.color || _c.attr('light') == e.color){number = _c.attr('number');}});return number;},darken : function(e){let id = e.id;let _scp = $('#' + id);let _co = _scp.find('div.one_color_option');_co.each(function(){let new_color = $(this).attr('dark');$(this).animate({'background-color' : '#' + new_color});$(this).attr('color',new_color);if(_co.is('.selected')){_scp.attr('color','new_color');}});},lighten : function(e){let id = e.id;let _scp = $('#' + id);let _co = _scp.find('div.one_color_option');_co.each(function(){let new_color = $(this).attr('light');$(this).animate({'background-color' : '#' + new_color});$(this).attr('color',new_color);if(_co.is('.selected')){_scp.attr('color','new_color');}});},z : ''}; $(document).off('click', '.simple_color_picker div.one_color_option');$(document).on('click', '.simple_color_picker div.one_color_option', function() {var _scp = $(this).parents('.simple_color_picker');_simple_color_picker.set({id : _scp.attr('id'),color : $(this).attr('color')});});function Ajax(){var xmlob=false;if (!xmlob && typeof XMLHttpRequest!='undefined') { xmlob = new XMLHttpRequest();};return xmlob;}; function was_ajax_request_completed(div,url,type,imc){if(typeof(imc) == 'undefined' || imc == null){imc = 'div_loading1';};var div_loading = imc.indexOf('#') != -1 ? top.$(imc) : top.$('#' + imc);if(type == 'innerHTML'){var cnt = div.indexOf('#') != -1 ? $(div) : $('#' + div);};if((cnt.html() == div_loading.html() || cnt.html() == '')){var h = "<div class=\"p5\">"+top._tx.common.this_resource_has_not_been_loaded_yet+"<BR>"+ "<input type='button' class='nw_button_2' onclick=\"ajax_load_get('"+div+"','"+url+"','"+type+"');\" value='"+top._tx.common.retry+"' />"+ "<input type='button' class='nw_button_2' onclick=\"div.innerHTML = top.document.getElementById('"+imc+"').innerHTML;\" value='"+top._tx.common.wait+"' />"+ "</div>";cnt.html(h);}else{clearInterval(ar_timeout_loaded_things[div]);};}; function ajax_load_get(div,url,type,imc){if(div == 'div_form_inline'){div = '#div_form_inline .dfi_content';};var cnt;var div_c;var iscr = -1;var fscr = -1;var ln_s = 0;var h_s  = true;var cscr = '';var sscr = '';if(typeof(type) == 'undefined' || type == null){type = 'innerHTML';};if(typeof(imc) == 'undefined' || imc == null){imc = 'div_loading_1';};if(type == 'innerHTML'){if($(div).length > 0){cnt = $(div);}else if(div.indexOf('.') != 0){if($('#' + div).length > 0){cnt = $('#' + div);}else if($('.' + div).length > 0){cnt = $('.' + div);};}; div_c = imc.indexOf('#') != -1 ? top.$(imc) : top.$('#' + imc);cnt.html(div_c.html()).show();ar_timeout_loaded_things[div] = setTimeout("was_ajax_request_completed('"+div+"','"+url+"','"+type+"','"+imc+"');",20000);};var aj = top.Ajax();url = url + '&use_ajax=true'; if(url.indexOf('actions.php')==0){ url = module_root_path + '/' + url;};setTimeout(function(){cnt.find('#div_loading_1').remove();cnt.find('.div_loading_1').remove();},60000);aj.open('GET',url,true);aj.onreadystatechange=function() {if (aj.readyState==4) {ca = aj.responseText;var qt_s = 0;while(h_s == true && qt_s < 6){iscr = ca.indexOf("\<script\>");fscr = ca.indexOf("\<\/script\>");if(iscr != -1 && fscr != -1){ln_s = fscr - iscr;sscr = ca.substr(iscr,ln_s+9);ca = ca.replace(sscr,'');sscr = sscr.replace("\<script\>",'');sscr = sscr.replace("\<\/script\>",'');cscr += sscr;qt_s++;}else{h_s = false;};};if(type == 'innerHTML'){cnt.html(ca);if(div.indexOf('div_form_inline') != -1 ){$('#div_dark').show();};}else if(type == 'variable'){if(typeof(div.set_ajax_response) != 'undefined'){div.set_ajax_response(ca);}else{div = ca;};};if(cscr != ''){eval(cscr);}; };};aj.send(null);if(aj.readyState == 4){return aj.responseText;};};function importar_js(dir){ cargado = false;for(i=0;i<ar_loaded_js_files_index.length;i++){if(ar_loaded_js_files_index[i] == dir){cargado = true;};};if(cargado == false){var elem = document.createElement('script');elem.type = "text/javascript";elem.src = dir;document.body.appendChild(elem);ar_loaded_js_files_index[ar_loaded_js_files_index.length] = dir;};};function ajax_jquery_import(url,frame){if (typeof(jQuery) != 'undefined' && typeof($) != 'undefined'){clearTimeout(ar_timeouts_jquery[url]);load_js_file(url,frame);}else{ar_timeouts_jquery[url] = setTimeout("ajax_jquery_import('"+url+"','"+frame+"')",100);};};function was_script_already_executed(e){var url = e.url;var frame = e.frame;var i, executed;if(typeof(frame)=='undefined'){frame = self;};executed = false;if(typeof(frame.ar_executed_scripts) != 'undefined'){for(i=0; i<=frame.ar_executed_scripts.length; i++){if(typeof(frame.ar_executed_scripts[i]) != 'undefined' && frame.ar_executed_scripts[i] == url){executed = true;}}};return executed;};function load_js_file(url,frame,implementation_code=null){if(url.indexOf('?') == -1){url += '?set=1';};var footprint = '';if(typeof(top._app.js.version) != 'undefined'){footprint += '&ftpr_V=' + top._app.js.version;};if(typeof(top._ses.school_id) != 'undefined'){footprint += '&ftpr_A=' + top._ses.school_id;};if(typeof(top._ses.user.role_id) != 'undefined'){footprint += '&ftpr_C=' + top._ses.user.role_id;};url += footprint;var force_js_loading = (typeof(top._app.debug.active) == 'undefined' || top._app.debug.active == false) ? false : true;if(typeof(url)!='undefined' && url != ''){url = set_unique_params_in_url(url);if(typeof(frame)=='undefined'){frame = top;};loaded = false;if(force_js_loading == false){for(i=0;i < top.ar_loaded_js_files_index.length;i++){if(top.ar_loaded_js_files_index[i] == url){loaded = true;ca  = top.ar_loaded_js_files[url];if(was_script_already_executed({url:url,frame:frame})==false){frame.eval(ca);if(typeof(implementation_code) != 'undefined' && implementation_code != null){(implementation_code)();};register_executed_script({url:url,frame:frame});}}}}; if(loaded == false || force_js_loading == true){ ar_ajax_handlers[url] = Ajax();var secure_url = url;ar_ajax_handlers[url].open('GET',secure_url,true);ar_ajax_handlers[url].onreadystatechange=function() {if (ar_ajax_handlers[url].readyState==4) {ca = ar_ajax_handlers[url].responseText;if(ca.charAt(0) == '<'){ca = '';};top.ar_loaded_js_files[url] = ca;top.ar_loaded_js_files_index[top.ar_loaded_js_files_index.length] = url;frame.eval(ca);if(typeof(implementation_code) != 'undefined' && implementation_code != null){(implementation_code)();};register_executed_script({url:url,frame:frame});};};ar_ajax_handlers[url].send(null);if(ar_ajax_handlers[url].readyState == 4){return ar_ajax_handlers[url].responseText;}}}}; function register_executed_script(e){if(typeof(e.frame.ar_executed_scripts) == 'undefined'){e.frame.ar_executed_scripts = new Array();};e.frame.ar_executed_scripts[e.frame.ar_executed_scripts.length] = e.url;}; var ar_executed_scripts= new Array(); var ar_ajax_handlers = new Array(); var ar_timeouts_jquery = new Array();var ar_divs_urls = new Array();var dfi_current_url= null;function set_breadcrumbs(aux_st,aux_sa){top.$('#span_title').html("<span class='module'>" + aux_st + "</span>" + ' > ' + "<span class='action'>" + aux_sa  + "</span>");top.document.title = top._app.title + ' - ' + aux_st + ' > ' + aux_sa;};function IsNumeric(x){var s = x ?? null;var vc = "0123456789.";var isn = (s != '' && s != null) ? true : false;var ch;for (i=0; isn == true && i < s.length; i++){ch = s.charAt(i); if (vc.indexOf(ch) == -1){isn = false;};};return isn;};function IsInteger(s){return (String(s).search(/^\d+$/) != -1);};function isAlphaNumeric(s){var regex = new RegExp("^[a-zA-Z0-9]+$");var i = 0;var is = true;for(i = 0; i < s.length; i++){var key = s.charAt(i);if(!regex.test(key)){is = false;break;};};return is;};function restrict_chars(str,allowed){var ar_str = new Array();var i = 0;var j = 0;if(str.length > 0){for(i=0; i<str.length; i++){var c = str.charAt(i);if(allowed.indexOf(c) != -1){ar_str[j] = c;j++;}}};new_str = ar_str.join('');return new_str;};function containsNumbers(s){var regex = new RegExp("^[0-9]+$");var i = 0;var cont = false;for(i = 0; i < s.length; i++){var key = s.charAt(i);if(regex.test(key)){cont = true;break;};};return cont;};function get_ar_attrs_from_html_tag(tag){var ar_attrs = {};if(typeof(tag) != 'undefined' && tag != null){let rg_attrs  = /(\w+)=["']?((?:.(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/igm ;var tmp_ar_attrs = tag.replace(/\\+$/ig, '').match(rg_attrs);if(typeof(tmp_ar_attrs) != 'undefined' && tmp_ar_attrs != null){$.each(tmp_ar_attrs,function(i,v){var y = v.split('=');var attr = {name : y[0].replace(/["'\\]+/ig,''),value : y[1].replace(/["'\\]+/ig,'')};ar_attrs[attr.name] = attr.value;});}else{console.error('No attrs defined for ' + tag);};return ar_attrs;};};function get_param_value(param,url){var value, temp_param, temp_value;if(url.indexOf('?') != -1){sp_url = url.split('?');url2 = sp_url[1];}else{url2 = url;};temp   = url2.split('&');value  = 'undefined';for(i=0; i < temp.length; i++){temp2 = temp[i].split('=');temp_param = temp2[0];temp_value = temp2[1];if(param == temp_param){value = temp_value;};};return value;}; function set_param_value(param,new_value,url){var temp_param, temp_value, str_parameters, new_url;var direccion = '';if(url.indexOf('?') != -1){sp_url = url.split('?');direccion = sp_url[0];str_parameters = sp_url[1];}else{str_parameters = url;};temp   = str_parameters.split('&');value  = 'undefined';var ep = false;for(i=0; i < temp.length; i++){temp2 = temp[i].split('=');temp_param = temp2[0];temp_value = temp2[1];if(param == temp_param){ep = true;temp[i] = param + '=' + new_value;};};if(ep == false){temp[i+1] = param + '=' + new_value;};new_url = temp.join('&');if(direccion != ''){new_url = direccion + '?' + new_url;};return new_url;};function get_element(e_id,p){var i;var e = null;if(typeof(p)=='undefined'){p = document;};if(p.childNodes.length > 0){for(i=0;i<p.childNodes.length;i++){  if(p.childNodes[i].id == e_id){e = p.childNodes[i];break;};};if(e == null){ for(i=0;i<p.childNodes.length && e == null;i++){  e = get_element(e_id,p.childNodes[i]);if(e != null){break;}}}};return (e != null)?e:null;};function set_msg(d_id, msg, type, blk){if(typeof(type)=='undefined'){type = 'ok';};if(typeof(blk) == 'undefined'){blk = 0;};if(type == 'ok'){color = 'green';}else if(type == 'error' || type == 'cancel'){color = 'red';}else if(type == 'idea'){color = 'orange';}else if(type == 'warning'){color = 'blue';}else if(type == 'wait'){color = 'gray';};var class_name = 'div_alert_' + type;var i = 0;var div = $('#' + d_id);var div_div = $('#' + d_id + ' > div');var span = "<div class='msg_icon'><span class='msg_icon vam ico-" + type + " ico-20em ico-" + color + "'></span></div>";if(div.length > 0){};div.show();div_div.show(); div.removeClass('div_alert_ok div_alert_error div_alert_blank div_alert_cancel div_alert_wait div_alert_warning');div.find('div').removeClass('div_alert_ok div_alert_error div_alert_blank div_alert_cancel div_alert_wait div_alert_warning');if(blk > 0){for(i=0;i<4;i++){setTimeout("$('#"+ d_id +"').addClass('div_alert_blank').removeClass('"+ class_name +"');",(200 * i));setTimeout("$('#"+ d_id +"').addClass('"+ class_name +"').removeClass('div_alert_blank');",((200 * i) + 100));};};if(typeof(msg) != 'undefined' && msg != null){if(typeof(msg) == 'string'){msg = msg.replace(RegExp("\n",'g'),"<br/>");msg = msg.trim();if(msg.indexOf('<br>') == 0){msg = msg.substring(4,msg.length + 1);};if(msg.indexOf('<br/>') == 0){msg = msg.substring(5,msg.length + 1);};if(msg.indexOf('<br />') == 0){msg = msg.substring(6,msg.length + 1);};if(msg.indexOf('<br \/>') == 0){msg = msg.substring(6,msg.length + 1);};};if(div.length > 0){msg = "<div class='msg_text'>"+msg+"</div>";div.addClass(class_name);div_div.html(span + msg + "<div style='clear:both;height:1px;'></div>");};};try{_dfi.resize();}catch(er){console.log(er);};};function msg(e){if(typeof(e.type)=='undefined'){e.type = 'ok';};var html = '';var msg = (typeof(e.msg) != 'undefined') ? e.msg : e.text;html += "<div class='div_alert_msg div_alert_msg_"+e.type+" r5'>";html += "<div class=''><span class='ico-"+e.type+"'></span></div>";html += "<div>"+msg+"</div>";html += "</div>";return html;};function blink(selector,cls_blk,final_class){var e = $(selector);var i = 0;if(typeof(cls_blk) == 'undefined'){cls_blk = 'bk8';};for(i=0;i<6;i++){setTimeout(function(){e.toggleClass(cls_blk);},500 + (100 * i));};e.removeClass(cls_blk);if(typeof(final_class) != 'undefined'){e.addClass(final_class);};};function set_style_current_row(ri,hid_ot){if(typeof(hid_ot) == 'undefined'){hid_ot = false;};var parent = document.getElementById(ri).parentNode;for(i=0;i<parent.childNodes.length;i++){remove_style_current_row(parent.childNodes[i].id);};if(top._app.name == 'edusimple'){borderColor = '#B9EAE3';}else{borderColor = '#F7AC11';};var elem = document.getElementById(ri);elem.childNodes[0].style.borderLeft = '2px solid ' + borderColor;elem.childNodes[elem.childNodes.length-1].style.borderRight = '2px solid ' + borderColor;var class_name = (typeof(selected_row_class_name) != 'undefined')?selected_row_class_name:'selected_row';$('#' + ri).addClass(class_name);pos = get_posicion(document.getElementById(ri));hacer_scroll_hacia = pos.top - 30;scroll_to_position();};function remove_style_current_row(ri,hid_ot){if(typeof(ri) != 'undefined' && ri != '' && ri != 'undefined'){var i;var row = $('#' + ri);var class_name = (typeof(selected_row_class_name)!='undefined')?selected_row_class_name:'selected_row';if(row.length > 0){row.removeClass(class_name);};var e = document.getElementById(ri);if(typeof(e) != 'undefined' && e != null && typeof(e.childNodes) != 'undefined'){for(i=0;i<e.childNodes.length;i++){if(typeof(e.childNodes[i].style)!='undefined'){e.childNodes[i].style.borderLeft = ''; break;};};for(i=e.childNodes.length-1;i>0;i--){if(typeof(e.childNodes[i].style)!='undefined'){e.childNodes[i].style.borderRight = ''; break;}}}}};var resize_cal_act_wnd = '';var int_opac = null ;function reload_current_url(){self.location = self.renewed_url;};function money_format(pa,include_currency=false,include_balance_symbol=true){var ns = '';var cs = '';if(include_currency){cs = top.currency_symbol;};if(include_balance_symbol){ns = '+';};p = parseInt(pa);if(p < 0){var st = p.toString();st = st.replace('-','');if(include_balance_symbol){ns = '-';};}else{var st = p.toString();};var lg = st.length;var fp = '';var j = 0;var i = 0;for(i=lg-1;i>=0;i--){j++;fp = st[i] + fp;if(j==3){fp = '.' + fp; j=0;};};if(fp[0] == '.'){fp = fp.substring(1,fp.length);};return ns + cs + fp;};$('document').ready(function(e){$(".one_help_box").live("click", function(e){$(".one_help_box a").show();});$(".div_help_box_close a, .close_helpbox span").live("click", function(e){var hp = $(this).parents('.one_help_box');var this_module = hp.attr('module');var this_code = hp.attr('code');var mc = this_module + '_' + this_code;$('#div_helpbox_' + mc).fadeOut();$('#div_lb_helpbox_' + mc).fadeOut();setTimeout(function(){$('#div_helpbox_' + mc).remove();$('#div_lb_helpbox_' + mc).remove();},1000);if(typeof(self.help_boxes[this_module + "_" + this_code]) != 'undefined'){self.help_boxes[this_module + "_" + this_code].close();}});$(".one_help_box").live("mouseover", function(e){ var hp = $(this);var this_module = hp.attr('module');var this_code = hp.attr('code');var key = this_module + '_' + this_code;if(typeof(self.help_boxes) != 'undefined' && typeof(self.help_boxes[key]) == 'undefined'){self.help_boxes[key] = new helpbox(this_module,this_code);}});$(".one_help_box").ready(function(){$(".special_news").each(function() {var hp = $(this);var this_module = hp.attr('module');var this_code = hp.attr('code');var _hb = this;_hb.module = this_module;_hb.code = this_code;_hb.special_news= $('div.special_news[code="' + _hb.code + '"]');_hb.div_helpbox= $('#div_helpbox_' + _hb.module + '_' + _hb.code);hb_height = _hb.special_news.get(0).offsetHeight + 3 + 'px';$(_hb.div_helpbox).height(hb_height);});});$(".special_news_div img").live("click",function(e){var special_image= $(this).attr('special_image');var link = $(this).attr('link');var target = $(this).attr('target');var code = $('.special_news').attr('code');var adc= $('.special_news_div').attr('automate_dialog_closing');if(code == 'special_news__20240604_register_teacher_to_event'){var url = top._app.root + top.mr_special_news + '/actions.php?action=register_teacher_to_event';var data = {school_id: top._ses.school_id,user: top._ses.user};$.ajax({url : url,cache : false,type : 'POST',data : data,dataType: 'json'}).done(function(res){if(typeof(res.success) != 'undefined' && res.success == true){return true;}});};if(typeof(link) != 'undefined' && $.trim(link) != ''){if(target == 'frame_start'){top.frame_start.location = link;}else{window.open(link,'',"_blank");};if(typeof(adc) !== 'undefined' && adc === 'true'){$(this).parents('.one_help_box').find('.close_helpbox span').trigger('click');$('.close_helpbox span').trigger('click');}}});$("#div_selection_of_columns_to_show").live('mouseenter',function(){clearTimeout(interval_selection_of_columns_to_show);if($("#div_sel_columns_inputs").css('display') == 'block'){$("#div_sel_columns_inputs").css('display','block');}});$(window).scroll(function() {if(typeof(scroll_handler) != 'undefined'){scroll_handler.check();}}); top.$(top.window).resize(function(e){if($('#cssmenu').length > 0){if ($( window ).width() > 768) {$('#cssmenu > ul').show();};if ($(window).width() <= 768) { };};top._zoom_handler?.set_default_zoom();});$("#check_all_rows").live('change',function(){var list = $(this).closest('.sub_list');if($(this).is(":checked") || $(this).attr('checked') == 'true'){list.find(".check_row").prop("checked",true);}else{list.find(".check_row").prop("checked",false);}});$("input[name^=filter_]").live('keyup',function(e){if(e.keyCode === 13) {  e.preventDefault();_module_filter.send({format:'html'});}}); $(".body").live('click',function(e){if(!$(this).hasClass('main_body_teacher') && typeof(top.$.sidr)!='undefined' && top._ses.user.role_id == 140) {top.$.sidr('close', 'sidr');if(typeof(top._node_picker)!='undefined'){top._node_picker.close();};};if(!$(this).hasClass('main_body') && !$(this).hasClass('home_body')) {if(typeof(top._pms) != 'undefined'){top._pms.close();};try{var social_panel_container = top.document.querySelector('.social-panel-container');social_panel_container.classList.remove('visible');}catch(e){}}});$('.body, #body_grid_list').live('click',function(){try{if(typeof(parent) != 'undefined' && !$(this).hasClass('main_body_teacher')){if(parent.$('.node_picker').length > 0){if(typeof(parent._node_picker) != 'undefined'){parent._node_picker.close();}else if(typeof(parent._gxl_picker) != 'undefined'){parent._gxl_picker.close();};};if(parent.$('.fstElement').length > 0){parent.$('.fstElement').removeClass('fstResultsOpened fstActive');};};}catch(e){};try{parent.$( ".hasDatepicker" ).datepicker( "hide" );if(parent.$('.fstElement').length > 0){parent.$('.fstElement').removeClass('fstResultsOpened fstActive');};}catch(e){}});$('.ui_tool_tip').live('mouseover',function(){if(!$(this).data('ui-tooltip')) { $('.ui_tool_tip').each(function(){let _t = $(this);let to = {};if(_t.is('[ui_tool_tip__params]')){let p = _t.attr('ui_tool_tip__params'); to = new Function("return " + p)();};_t.tooltip(to);});$(this).tooltip('open');}});$('.tdyn_tr td').live('click',function(){if(!$(this).hasClass('tdyn_td_checkbox')){eval($(this).parent().attr('when_click'));}});$('select[name^=filter_], input[name^=filter_]').live('change',function(){var val = $(this).val();if(val != '' && val != '[all]'){$(this).addClass('active_filter');}else{$(this).removeClass('active_filter');}});$('input[type=checkbox]').live('change',function(){var val = $(this).val();var name = $(this).attr('name');try{let _c = $('input[name='+name+'_hidden_checkbox]');if(_c.length > 0){if($(this).is(':checked')){_c.val(1);}else{_c.val(0);};};}catch(e){}});$('.parent_button').live('click',function(){var sub = $(this).find('.sub_buttons');if(sub.is(':visible')){sub.hide();$(this).parent().find('.arrow').attr('src',top._app.assets.url + '/images/arrow_down.png');}else{sub.show();$(this).find('.arrow').attr('src',top._app.assets.url + '/images/arrow_up.png');}});$('.sub_buttons').live('mouseleave',function(){$(this).hide();$(this).parent().find('.arrow').attr('src',top._app.assets.url + '/images/arrow_down.png');});$('.nw_button_keypad[name=delete]').live('click',function(){nwDeleteRowsTabDyn('actions.php?action=delete_batch',form_module_list.str_records.value)});$.extend({redirectPost: function(location, args, frame_name){var form = $('<form></form>');form.attr("method", "post");form.attr("action", location);if(typeof(frame_name) != 'undefined'){form.attr("target", frame_name);};$.each( args, function( key, value ) {var field = $('<input></input>');field.attr("type", "hidden");field.attr("name", key);field.attr("value", value);form.append(field);});$(form).appendTo('body').submit();}}); $.widget("ui.tooltip", $.ui.tooltip, {options: {content: function () {var title = $(this).prop('title');if($(this).hasClass('ui_tool_tip_html')){return title;}else{return stripHTML(title);};}}});$("input[type='number']").live('change',function(){v = parseFloat($(this).val());min = ($(this)[0].hasAttribute('min') && $(this).attr('min').trim() !== '') ? parseFloat($(this).attr('min')) : null;max = ($(this)[0].hasAttribute('max') && $(this).attr('max').trim() !== '') ? parseFloat($(this).attr('max')) : null;if (min !== null && v < min){$(this).val(min);};if (max !== null && v > max){$(this).val(max);}});$(".field_groups_menu .button").live('click', function(){var cat_id = $(this).attr('cat_id');var _menu = $(this).closest(".field_groups_menu");_menu.find(".button").removeClass('selected');$(this).addClass('selected');var _cnt = _menu.siblings(".field_groups_content");_cnt.find(".content").hide();_cnt.find(".content[cat_id="+cat_id+"]").fadeIn();});});function stripHTML(dirtyString) {var container = document.createElement('div');var text = document.createTextNode(dirtyString); container.appendChild(text);return container.innerHTML;};function strip_html(e){var new_text = '';if(typeof(e) == 'string'){var text = e;}else if(typeof(e) == 'object'){var text = e.text;};if(typeof(text) != 'undefined'){text = text.replaceAll('<script','<p');new_text = $("<div>").html(text).text();};return new_text;};Array.prototype.clean = function(deleteValue) {for (var i = 0; i < this.length; i++) {if (this[i] == deleteValue) {this.splice(i, 1);i--;};};return this;};Array.prototype.clone = function () {var arr1 = new Array();for (var property in this) {arr1[property] = (typeof(this[property]) == 'object' && this[property].hasOwnProperty('clone')) ? this[property].clone() : this[property];};return arr1;};Array.prototype.prepend = function(value) {  var new_array = this.slice();  new_array.unshift(value);  return new_array;};Array.prototype.remove_value = function(value) {try{const index = this.indexOf(value);if (index > -1) {this.splice(index, 1);};}catch(e){};};Object.size = function(obj) {var size = 0, key;for (key in obj) {if (obj.hasOwnProperty(key)) size++;};return size;};String.prototype.ucWords = function(){var x = '';var a = this.split(' ');if(a.length > 0){$.each(a,function(i,v){a[i] = v.toCapitalCase();});x = a.join(' ');};return x;};String.prototype.toCapitalCase = function(){var x = '';var a = this;if(a.length > 0){x = a[0].toUpperCase() + a.slice(1);};return x;};String.prototype.removeAccents = function(strictness = 'STRICTNESS_NORMAL'){if(strictness == 'STRICTNESS_NORMAL'){return this.replace(/[Ã¡Ã Ã£Ã¢Ã¤]/gi,"a").replace(/[Ã©Ã¨Â¨Ãª]/gi,"e").replace(/[Ã­Ã¬Ã¯Ã®]/gi,"i").replace(/[Ã³Ã²Ã¶Ã´Ãµ]/gi,"o").replace(/[ÃºÃ¹Ã¼Ã»]/gi, "u").replace(/[Ã§]/gi, "c").replace(/[Ã±]/gi, "n").replace(/[^a-zA-Z0-9]/g," ");}else if(strictness == 'STRICTNESS_LOW'){return this.replace(/[Ã¡Ã Ã£Ã¢Ã¤]/gi,"a").replace(/[Ã©Ã¨Â¨Ãª]/gi,"e").replace(/[Ã­Ã¬Ã¯Ã®]/gi,"i").replace(/[Ã³Ã²Ã¶Ã´Ãµ]/gi,"o").replace(/[ÃºÃ¹Ã¼Ã»]/gi, "u").replace(/[Ã§]/gi, "c").replace(/[Ã±]/gi, "n");};};String.prototype.replaceAll = function(search, replacement) {var target = this;var search_rx = new RegExp(search, 'g');var new_text = target.replace(search_rx, replacement);return new_text;};String.prototype.removeQuotes = function() {var target = this;var new_text = target.replaceAll('"', '').replaceAll("'",'');return new_text;};String.prototype.indexNthOf = function(needle, starting_index, n) {var target = this;let index = -1;for (let i = 0; i < n; i++) {index = target.indexOf(needle, index + 1);if (index === -1) {return -1;};};return index;};function renderJQueryUI2(ct){ct = (typeof(ct)==="undefined") ? $('body') : ct;$('.button', ct ).button(); $('.ui_tool_tip').each(function(){let _t = $(this);let to = {};if(_t.is('[ui_tool_tip__params]')){let p = _t.attr('ui_tool_tip__params'); to = new Function("return " + p)();};_t.tooltip(to);});if(typeof($('.ui_tags_input').tagging) != 'undefined'){$('.ui_tags_input').tagging();};};function renderJQueryUI(e){if($('.ui-button').not('label').length > 0){$('.ui-button').not('label').button();};if($('.ui-button-1').length > 0){$('.ui-button-1').css('font-size','11px').button();};if($('.ui-button-2').length > 0){$('.ui-button-2').css({"width": "120px", "height": "24px","font-size": "11px"}).button();};if($('.ui_tool_tip').length > 0){ $('.ui_tool_tip').each(function(){let _t = $(this);let to = {};if(_t.is('[ui_tool_tip__params]')){let p = _t.attr('ui_tool_tip__params'); to = new Function("return " + p)();};_t.tooltip(to);});};if($('.ui_tags_input').length > 0&&typeof($('.ui_tags_input').tagging) != 'undefined'){$('.ui_tags_input').tagging();};if($('select[multiple]').length > 0 &&typeof($('select[multiple]').fastselect) != 'undefined'){$('select[multiple]').fastselect();};if((typeof(e?.init_select_options) == 'undefined' || e.init_select_options == true)){ _inputs_handler_dm?.init_select_options();};  let _add_form = $('.form_object_table[action=add]');if(_add_form.length > 0){let max_height = Math.max(50, window.innerHeight - 300).toString() + 'px';_add_form.addClass('scrolling_area');_add_form[0].style.setProperty('max-height', max_height, 'important');};};function init_date_inputs(){try{ar_date_inputs = $('.input_date')}catch(e){if(typeof(parent.$) != 'undefined'){ar_date_inputs = parent.$('.input_date');};};if(typeof(ar_date_inputs) != 'undefined' && ar_date_inputs != null){ar_date_inputs.each(function(){var options = {dateFormat: 'yy/mm/dd',showOn: 'focus'};if($(this)[0].hasAttribute('min_date') && $(this).attr('min_date') != ''){options['minDate'] = $(this).attr('min_date').slice(0, 10).replaceAll('-','/');};if($(this)[0].hasAttribute('max_date') && $(this).attr('max_date') != ''){options['maxDate'] = $(this).attr('max_date').slice(0, 10).replaceAll('-','/');};if($(this)[0].hasAttribute('change_month') && $(this).attr('change_month') != ''){options['changeMonth'] = $(this).attr('change_month');};if($(this)[0].hasAttribute('change_year') && $(this).attr('change_year') != ''){options['changeYear'] = $(this).attr('change_year');};if($(this)[0].hasAttribute('year_range') && $(this).attr('year_range') != ''){options['yearRange'] = $(this).attr('year_range');}else{options['yearRange'] = "-100:+0";};$(this).datepicker(options);if($(this)[0].hasAttribute('value') && $(this).val() != ''){var date_value = $(this).val().slice(0, 10).replaceAll('-','/');if(date_value !== '0000/00/00'){$(this).datepicker("setDate", date_value);}else{$(this).val('0000/00/00');}}});};};function disable_inactive_inputs(){try{$("input[disabled][type!='button'], select[disabled]").addClass("input_disabled");}catch(e){if(typeof(parent.$) != 'undefined'){parent.$("input[disabled][type!='button'], select[disabled]").addClass("input_disabled");}}};function strPad(input, length, string) {string = string || '0'; input = input + '';return input.length >= length ? input : new Array(length - input.length + 1).join(string) + input;};function strDateFormat(str,options){var d1 = new Date(ass_last_updated.replace(/-/g, "/"));var d2 = d1.year();return d2;};function open_support_message_form(){var ruta_mensajes = top._app.root_control + "tools/messages/actions.php?action=open_support_message_form";if(typeof(div_oscuro_enviar_mensaje) != 'undefined'){top.$('#div_oscuro_enviar_mensaje').fadeIn();}else{$.get(ruta_mensajes,function(htmlInsertar){top.$(htmlInsertar).appendTo("body");});};}; function numberWithCommas(x) {x = x.toString();var pattern = /(-?\d+)(\d{3})/;while (pattern.test(x))x = x.replace(pattern, "$1.$2");return x;};function post(path, target = null, parameters = null) {var form = $('<form></form>');if(typeof(path) == 'object'){target = path.target;parameters = path.parameters;path = path.url;};form.attr("method", "post");form.attr("action", path);form.attr("target", target);if(typeof(parameters) != 'undefined' && parameters != null){$.each(parameters, function(key, value) {var field = $('<input></input>');field.attr("type", "hidden");field.attr("name", key);field.attr("value", value);form.append(field);});};$(document.body).append(form);form.submit();form.remove();};function get_str_records(){return $('#form_module_list input[name=str_records]').val();};function parse_system_msg(e){var i = 0;var ct = 0;var parsed_msg = '';var msg_parts = e.msg.split(';');for(i = 0; i < msg_parts.length; i++){if(msg_parts[i].trim() != '' && i < 50){parsed_msg += '' + top._tx.g(msg_parts[i]) + '<br />';};};return parsed_msg;};function std_obj_count(obj){var qt = 0;$.each(obj,function(i,v){qt++;});return qt;}; function get_user_img(e){let user_img = e.nid + '.jpg';let width = e?.width ?? 100;let height = e?.height ?? '';if(typeof(top._dm.ar_students) != 'undefined' && typeof(top._dm.ar_students[e.u_id]) != 'undefined'){user_img = top._dm.ar_students[e.u_id].user_img;};if(top._ses.school_id == 20000){  html = "<img align='center' width='"+width+"' height='"+height+"' src='"+ top._app.url + "/assets/images/no_photo.jpg' />";}else{html = "<img class='r5 one_user_photograph' align='center' width='"+width+"' height='"+height+"' src='" + top._app.s3.school_url + "/img_users/" + user_img + "' onerror='src=\""+ top._app.url + "/assets/images/no_photo.jpg\";' />";};return html;}; function set_unique_params_in_url(url){var prm = new Array();if(url.indexOf('?') != -1 && url.indexOf('&') != -1){var x = url.split('?');;var url_part = x[0];var prm_part = x[1];var ar_params = new Array();var ar_new_str_params = new Array();var tmp_ar_params = prm_part.split('&');$.each(tmp_ar_params,function(i,v){var y = v.split('=');ar_params[y[0]] = y[1];});var j = 0;Object.keys(ar_params).forEach(function(key, index) {ar_new_str_params[j] = key + '=' + this[key];j++;}, ar_params);prm_part = ar_new_str_params.join('&');url = url_part + '?' + prm_part;};return url;};function get_file_ico_by_ext(e){var fe = e.extension;var icon = {};if(fe.indexOf('xlsx') != -1){icon = {class : 'ico-xlsx',color : 'ico-green'};}else if(fe.indexOf('xls') != -1){icon = {class : 'ico-xls',color : 'ico-green'};}else if(fe.indexOf('doc') != -1){icon = {class : 'ico-doc',color : 'ico-blue'};}else if(fe.indexOf('ppt') != -1){icon = {class : 'ico-file',color : 'ico-terracota'};}else if(fe.indexOf('pdf') != -1){icon = {class : 'ico-pdf',color : 'ico-darkred'};}else if(fe.indexOf('png') != -1 || fe.indexOf('jpg') != -1 || fe.indexOf('bmp') != -1 || fe.indexOf('webp') != -1){icon = {class : 'ico-camera',color : 'ico-orange'};}else if(typeof(e.url) != 'undefined' && (e.url.indexOf('youtube') != -1 || e.url.indexOf('youtu.be') != -1)){icon = {class : 'ico-youtube3',color : 'ico-red'};}else{icon = {class : 'ico-file',color : 'ico-blue'};};return icon;};function set_image_on_error(tag){tag.onerror=null;if(_ses.photos_x_at == 1 && tag.src.indexOf('_') != -1){  tag.src = img_sin_at;}else{ tag.src = top._app.images.url + '/no_photo.jpg'};};function am_i_nusoft_glimpsing(){var result = false;if(typeof(top._ses.previous_session) != 'undefined' && top._ses.previous_session.role_id == 10){result = true;};return result;};function am_i_nusoft(){var result = false;if(typeof(top._ses.user) != 'undefined' && top._ses.user.role_id == 10){result = true;};return result;};function am_i_evaluator_staff(){var result = false;var role_staff = ['30','100','50','60','40','80','120','20'];if(typeof(top._ses.user) != 'undefined' &&role_staff.includes(top._ses.user.role_id)){result = true;};return result;};function html_entities(str) {return String(str).replaceAll(/&amp;/g, '&').replaceAll(/&lt;/g, '<').replaceAll(/&gt;/g, '>').replaceAll(/&quot;/g, '"');};function is_json_string(str){try{JSON.parse(str);}catch(e){return false;};return true;};function extract_youtube_id(url){var ar_url_params= url.split('&');var ar_parts = [];var id= '';$.each(ar_url_params,function(i,prm){if(prm.indexOf('v=') !== -1){ar_parts= prm.split('v=');id= ar_parts[1];}else if(prm.indexOf('youtu.be/')){ar_parts = prm.split('youtu.be/');id= ar_parts[1];}});return id;};function youtube_preview(prm){var html= '';var _vh= new views_handler();html = _vh.process({module_name : 'embed',view_name : 'iframe/youtube',view_params : {id: prm.id}});ui_alert({content : html,content_type : 'html',type : 'success',animation : 'top',closeAnimation: 'scale'});};function nl2br (str) {    if (typeof str === 'undefined' || str === null) {        return '';    };    var breakTag = '<br />';    return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1' + breakTag + '$2');};function is_email_valid(e) {const patt = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2};$/;return patt.test(e);};function is_email_validd(email) {var is = false;if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)){is = true;};return is;};function get_current_browser(){const n = navigator.userAgent.toLowerCase();var nav = '';if (n.includes('firefox')) {nav = 'firefox';}else{nav = 'chrome';};return nav;}; function calculate_tag_depth(element, tag_name, current_depth=1) {let ar_nested_tags = element.querySelectorAll(':scope > ' + tag_name);  let max_depth = 0;if (ar_nested_tags.length === 0) {max_depth =  1;  }else if(current_depth < 10){ ar_nested_tags.forEach(nested_tag => {current_depth = current_depth++;max_depth = Math.max(max_depth, calculate_tag_depth(nested_tag,tag_name,current_depth)); });max_depth = max_depth + 1;};return max_depth;};function format_date(date,format='Y-m-d H:i:s') {const yyyy = date.getFullYear();const mm = String(date.getMonth() + 1).padStart(2, '0');const dd = String(date.getDate()).padStart(2, '0');const HH = String(date.getHours()).padStart(2, '0');const ii = String(date.getMinutes()).padStart(2, '0');const ss = String(date.getSeconds()).padStart(2, '0');let str = '';if(format == 'Y-m-d H:i:s'){str = '' + yyyy + '-' + mm + '-' + dd + ' ' + HH + ':' + ii + ':' + ss;};return str;}; function summer_note(e, add_config = {}){const config = {height: 300,lang: 'es-ES',toolbar: [['style', ['bold', 'italic', 'underline', 'strikethrough']],['font', ['fontname', 'fontsize', 'superscript', 'subscript', 'clear']],['color', ['color']],['para', ['ul', 'ol', 'paragraph']], ['insert', ['link', 'picture']],['view', ['codeview']],],popover: {image: [],  },callbacks: {onImageUpload: function() { return false;}}};const full_config = Object.assign({}, config, add_config);$(e).summernote(full_config);};var scroll_handler = {last_scroll_top : 0,can_change_filter : true,scroll_dir : 'down',temp_disable_filter_change : function(){this.can_change_filter = false;setTimeout('scroll_handler.enable_filter_change()',500);},enable_filter_change : function(){this.can_change_filter = true;},check : function(){var diff = $(window).height() - $(window.parent).height(); $('table.table_clone_tdyn_tr').remove();if($('#form_module_list').length > 0){var st = $(window).scrollTop();if ((st > 40 || (st > 20 && current_module == 'grading_book'))&&diff > 300){if(this.can_change_filter == true || this.scroll_dir == 'down'){_module_filter.hide();this.temp_disable_filter_change();};if($('#table_dynamic_grid tr.tdyn_tr.selected_row').length > 0){$('body').append("<table class='table_clone_tdyn_tr'></table>");var clone_tr = $('#table_dynamic_grid tr.tdyn_tr.selected_row').clone();clone_tr.removeClass('selected_row').addClass('clone').appendTo('table.table_clone_tdyn_tr');$('tr.tdyn_tr.clone .tdyn_td_checkbox').remove();$('tr.tdyn_tr.clone').attr('onclick','');$('tr.tdyn_tr.clone').attr('when_click','');};}else{if(!$('#div_dark').is(':visible')){if(this.can_change_filter == true || this.scroll_dir == 'up'){_module_filter.show();this.temp_disable_filter_change();}}};if(this.last_scroll_top < st){this.scroll_dir = 'down';};if(this.last_scroll_top > st){this.scroll_dir = 'up';};this.last_scroll_top = st;}},z : ''};var scroll_timeout = null;var hacer_scroll_hacia = null;var scroll_last_dif = null;function scroll_to_position(e){var ps = false;var dif = document.body.scrollTop - hacer_scroll_hacia;var delta = (dif > 0)?Math.ceil(dif/5):Math.floor(dif/5);if(scroll_last_dif !== null && Math.abs(dif) >= Math.abs(scroll_last_dif)){ps = true;};if(Math.abs(dif) > 5){document.body.scrollTop -= delta;scroll_timeout = setTimeout('scroll_to_position()',10);scroll_last_dif = dif;}else{ps = true;};if(ps == true){stop_scrolling();};};function stop_scrolling(){clearTimeout(scroll_timeout);scroll_last_dif = null;scroll_timeout = null;document.body.scrollTop = hacer_scroll_hacia;hacer_scroll_hacia = null;};function get_posicion(e) {if (typeof(e) == "string"){e = document.getElementById(e);};if (typeof(e) == 'undefined') return { top:0,left:0 };var y = 0; var x = 0;while (e.offsetParent) {x += e.offsetLeft;y += e.offsetTop;e = e.offsetParent;};return {top:y,left:x};};var _date = {current_date : function(e){var t = new Date();var yyyy = t.getFullYear();var mm = t.getMonth()+1;  var dd = t.getDate();if(mm < 10) {mm = '0' + mm;};if(dd < 10) {dd = '0' + dd;}; return yyyy + '/' + mm + '/' + dd;},get_day_of_week(e){if(typeof(e.date) != 'undefined'){var date = e.date;}else{var date = e;};var d = new Date(date);return d.getDay();},get_day_name : function(e){var day = this.get_day_of_week(e) + 1;day = day.toString().padStart(2,"0");var day_name = top._tx.g('calendar.day_'+day);return day_name;},compare : function(date1,date2){var r = null;var max_length = 14;try{date1 = date1.replaceAll('/','').replaceAll('-','').replaceAll(' ','').replaceAll(':','');date2 = date2.replaceAll('/','').replaceAll('-','').replaceAll(' ','').replaceAll(':','');if(date1.length <= 8 || date2.length <= 8){max_length = 8;};date1 = date1.substr(0,max_length);date2 = date2.substr(0,max_length);if(date1 > date2){r = 1;}else if(date2 > date1){r = -1;}else if(date2 == date1){r = 0;};}catch(e){console.error(e);}; return r;},z : ''};var _help = {open : function(){window.open(top._app.help.url,'_blank');},z : ''};function helpbox(m,c){var _hb = this;_hb.i_understood = false;_hb.module = m;_hb.code = c;var selector = '#i_understood_helpbox_' + _hb.module + '_' + _hb.code;_hb.input_i_understood = $(selector).length > 0 ? $(selector) : null;_hb.div_helpbox= $('#div_helpbox_' + _hb.module + '_' + _hb.code);_hb.div_helpbox_adc= $('#div_helpbox_' + _hb.module + '_' + _hb.code).attr('automate_dialog_closing');_hb.div_lb_helpbox= $('#div_lb_helpbox_' + _hb.module + '_' + _hb.code);if(typeof(_hb.div_helpbox_adc) !== 'undefined' && _hb.div_helpbox_adc === 'true'){setTimeout(function(){self.help_boxes[m + '_' + c].close();},20000);};}; helpbox.prototype.close = function(){var _hb = this;_hb.div_helpbox.fadeOut();_hb.div_lb_helpbox.fadeOut();setTimeout(function(){_hb.div_helpbox.remove();_hb.div_lb_helpbox.remove();},2000);if(_hb.input_i_understood != null && _hb.input_i_understood.val() == 1){$.ajax({url : top._app.root_control + 'actions.php',cache : false,data  : {action : 'helpbox_do_not_show_again',module : _hb.module,code : _hb.code},type: "POST",dataType: "json"}).done(function( res ) {});};};var _current_interface = { change_branch : function(e){self.location = 'index.php?md7=' + Math.random() + '&b_id=' + e.b_id;}, change_academic_term : function(e){top._dmh.unload_data_models();if(top._ses.user.role_id > 20){var url = top._app.root + top.mr_main_frame + '/actions.php?action=see_main_frame&at_id=' + e.at_id + '&e_id=' + e.e_id;top.location = url;}else{var frame = null;if(typeof(form_change_interface)=='undefined'){frame = frame_start;}else{frame = self;};if(typeof(frame.init_school_picker) != 'undefined'){frame.init_school_picker(frame.school_picker_params);};var form = frame.$('form[name=form_change_interface]');form.find('#at_hidden').attr('value',e.at_id);form.submit();}}, get_et_by_date(e){var date = e.date;var c_date = e.date.replaceAll('/','-').replaceAll('-','').substr(0,8);var et = {at_id : -1,et_id : -1,name : '',start_date : '1970-01-01',end_date : '2100-01-01'};$.each(top._dm.ar_et,function(i,v){var c_date_start = v.date_start.replaceAll('-','').substr(0,8);var c_date_end = v.date_end.replaceAll('-','').substr(0,8);if(parseInt(c_date_end) >= parseInt(c_date)&&parseInt(c_date_start) <= parseInt(c_date)){et = v;}});return et;}, at_allows_grading(e){var at_id = (typeof(e) != 'undefined' && typeof(e.at_id) != 'undefined') ? e.at_id : top._ses.admin_at;return ($.inArray(top._dm.ar_at[at_id].status,[0,3,4]) != -1) ? false : true;}, et_allows_grading(e){var et_id = (typeof(e) != 'undefined' && typeof(e.et_id) != 'undefined') ? e.et_id : top._ses.admin_et;return (top._dm.ar_et[et_id].status == 1) ? true : false;}, logout : function(){if(top._ses.user.role_id == top._app.roles.teacher &&typeof(top._app.grading_books) != 'undefined'&&typeof(top._app.grading_books.unsaved_changes) != 'undefined'&&$.trim(top._app.grading_books.unsaved_changes) != ''){var ar_courses = new Array();var course_names = '';var ar_gxc = top._app.grading_books.unsaved_changes.split('|');$.each(ar_gxc,function(k,gxc_id){if($.trim(gxc_id) != ''){var gxc = top._dm.ar_gxc[gxc_id];ar_courses.push(top._dm.ar_courses[gxc.c_id].full_name + gxc.group);}});course_names = ar_courses.join(' - ');var content = top._tx.g('teacher.tip_please_check_these_grading_books,' + course_names) + '<br/><br/>' + "<span style='color:#aaaaaa;font-size:10px;'>" + top._tx.teacher.tip_did_you_save_your_work + "</span>";ui_alert({title : top._tx.teacher.tip_did_you_save_your_work__title,content : content,type : 'warning',content_type : 'html',icon : '',  animation : 'top',closeAnimation: 'scale',buttons : {logout : {text  : top._tx.common.logout_without_saving,btnClass : 'btn-orange',action : function () {this.close();var url = top._app.root + top.mr_login + '/actions.php?action=do_logout';top.location = url;}},cancel : {text : top._tx.common.cancel,action  : null}}});}else{const cookies = `; ${document.cookie};`;const parts_ck = cookies.split(`; jwt=`) ?? [];const jwt_ck = (parts_ck.length === 2) ? parts_ck?.pop()?.split(';').shift() : '';var jwt = localStorage.getItem('jwt');jwt = (jwt != null && jwt != '') ? jwt : jwt_ck;var url = top._app.root + top.mr_login + '/actions.php?action=do_logout&jwt=' + jwt;top.location = url;}}, wait : function(e){$('#div_dark').fadeIn();var msg_text = top._tx.g('common.wait_this_can_take_a_while');if(typeof(e) != 'undefined'){if(typeof(e.msg) != 'undefined'){msg_text = e.msg;};};var html = "<div class='please_wait'>" + $('#div_loading_1').html() + '<br/>' + msg_text + "</div>"; $('body').append(html);}, stop_waiting : function(e){$('#div_dark').fadeOut();$('div.please_wait').fadeOut();$('div.please_wait').remove();if(typeof(e) != 'undefined'){if(typeof(e.reload) != 'undefined' && e.reload == true){self.location.reload();}}},z: ''}; function load_url(e){var url = (typeof(e.url) != 'undefined') ?e.url : '';var url_params = (typeof(e.url_params) != 'undefined') ? e.url_params : null;if(url != ''){if(url.indexOf('do_logout') != -1){top._current_interface.logout();return false;};if(url.indexOf('?') == -1){url += '?a=1';};aux = url.split('/');abs_url =  top._app.root_control + url;var mod_name = ms.get_name_from_url(url);var mod_image = mod_name;if(url.indexOf('billing')!=-1){mod_name = url.replace(RegExp("[\:\&\/\.\?\=]",'g'),'_');url += '&module_name=' + mod_name;abs_url += '&module_name=' + mod_name;};frame = 'frame_'+mod_name;if(!ms.exists(mod_name)){ms.add({url:url,name:mod_name,url_params:url_params});};ms.show_div(mod_name);if(module_has_been_loaded_already(mod_name,abs_url,url_params) == false){top.post(abs_url,frame,url_params);};if(typeof(e.button_name) != 'undefined'){$("#span_title_image").html("<span style='color:#000000;margin-left:5px' class='icn-"+e.button_name+" icn-15em'></span>");}else if(mod_name == 'start'){$("#span_title_image").html("<span style='color:#000000;margin-left:5px' class='icn-desk icn-16em'></span>");}else{$("#span_title_image").html("<span style='color:#000000;margin-left:5px' class='icn-setting_vars_x_school icn-20em'></span>");};if($('#menu-button').is(':visible')){$('#menu-button').siblings('ul').removeClass('open').hide();}}};function module_has_been_loaded_already(name,url,url_params){var loaded = false;var ua = '';var up = null;var pa = -1;for(i=0;i<ms.ar_modules.length;i++){if(ms.ar_modules[i].name == name){ua = ms.ar_modules[i].current_url;up = ms.ar_modules[i].url_params;if(ua != null){pa = ua.toString().indexOf('#');};if(pa > 0 && ua != null){ua = ua.toString().substr(0,pa);};if(url != '' && ua != null && ua != '' && ((url == ua&&(url_params == null || up == url_params))||ms.ar_modules[i].reload_if_url_changes == false)){loaded = true;}}};return loaded;}; function modules_handler(str){this.str = str;this.html_divs = '';this.current_module = '';this.ar_modules = new Array();}; modules_handler.prototype.load = function(){if(this.str!=''){aux1 = this.str.split('|');if(aux1.length > 0){for(i=0;i < aux1.length;i++){aux2 = aux1[i].split(',');key = aux2[0];path = aux2[1];if(key != '' && path != ''){this.ar_modules[i] = new module({name:key,path:path});}}}}}; modules_handler.prototype.get_divs = function(){for(i=0;i<this.ar_modules.length;i++){this.html_divs += "<div id='div_frame_"+this.ar_modules[i].name+"' class='div_frame_module w100 h100 dn'>";this.html_divs +="<iframe id='frame_"+this.ar_modules[i].name+"' name='frame_"+this.ar_modules[i].name+"' frameborder='0' width='100%' height='100%' scrolling='no'></iframe></div>";};document.getElementById('container_div_frames').innerHTML = this.html_divs;}; modules_handler.prototype.add = function(e){ var url = typeof(e.url != 'undefined') ? e.url : '';var name = typeof(e.name != 'undefined') ? e.name : '';var scrolling = typeof(e.scrolling != 'undefined') ? e.scrolling : 'no';var attributes = typeof(e.name != 'undefined') ? e.name : '';var url_params = typeof(e.url_params != 'undefined') ? e.url_params : '';if(scrolling == ''){scrolling = ( name == 'my_profile' || name == 'start' || ( name.indexOf('generated_reports') == -1 && name.indexOf('evaluation_term_reports') == -1)) ? 'auto':'yes';};if(name.indexOf('reports_') != -1 && name.indexOf('evaluation_term_reports') == -1){scrolling = 'no';}; if(typeof(attributes)=='undefined'){var attributes = '';};if(typeof(name) == 'undefined'){name = this.get_name_from_url(url);};path = this.get_module_directory_from_url(url);if(!this.exists(name)){this.ar_modules[this.ar_modules.length] = new module({name:name,path:path,url_params:e.url_params});aux = document.createElement('div');aux.id = 'div_frame_'+name;aux.className = 'div_frame_module w100 h100 dn';document.getElementById('container_div_frames').appendChild(aux);aux2  = document.createElement('iframe');aux2.id  = 'frame_'+name;aux2.name = 'frame_'+name;aux2.className  = 'w100 h100 sinborde';aux2.scrolling = scrolling;document.getElementById('div_frame_'+name).appendChild(aux2);};}; modules_handler.prototype.exists = function(name){var exists = false;if(this.ar_modules.length > 0){for(i=0;i<this.ar_modules.length;i++){if(this.ar_modules[i].name == name){exists = true;}}};return exists;}; modules_handler.prototype.get_name_from_url = function(url){var aux = url.split('/');var pos_module = Math.max((aux.length - 2), 0);var module_name = aux[pos_module];module_name = module_name.replace(/[^a-z0-9_]/gmi, "");if(module_name == 'users'){var roles = get_param_value('roles',url);if(roles != 'undefined'){module_name = 'users_' + roles;};};return module_name;}; modules_handler.prototype.get_module_directory_from_url = function(url){path = url.replace('index.php','');return path;}; modules_handler.prototype.register_loaded_module = function(name,span_title,span_action){for(i=0; i<this.ar_modules.length; i++){if(this.ar_modules[i].name == name){this.ar_modules[i].loaded = true;var i_frame = top.frames[this.ar_modules[i].frame_id];this.ar_modules[i].span_title = (typeof(span_title)!='undefined')? span_title : i_frame.span_title;this.ar_modules[i].span_action = (typeof(span_action)!='undefined')? span_action : i_frame.span_action;this.ar_modules[i].current_url = i_frame.location;}}}; modules_handler.prototype.is_already_loaded = function(name,url){if(typeof(url) != 'undefined' && url != ''){url = top._app.root_control + url;}else{url = '';};loaded = false;for(i=0;i<this.ar_modules.length;i++){if(this.ar_modules[i].name == name){loaded = this.ar_modules[i].loaded;if(url != '' && this.ar_modules[i].current_url != url && this.ar_modules[i].reload_if_url_changes == true){loaded = false;}}};return loaded;}; modules_handler.prototype.get_index = function(name){var index = null;for(i=0;i<this.ar_modules.length;i++){if(this.ar_modules[i].name == name){index = i;};};return index;};modules_handler.prototype.hide_divs = function(){for(i=0;i<this.ar_modules.length;i++){document.getElementById(this.ar_modules[i].div_id).style.display='none';};}; modules_handler.prototype.show_div = function(name){this.current_module = name;this.hide_divs();for(i=0;i<this.ar_modules.length;i++){if(this.ar_modules[i].name == name){$('#' + this.ar_modules[i].div_id).show();if(typeof(top.set_breadcrumbs) != 'undefined'){top.set_breadcrumbs(this.ar_modules[i].span_title,this.ar_modules[i].span_action);}}}};modules_handler.prototype.empty_module = function(e){try { var m_name = e.module_name;if(typeof(m_name) != 'undefined' && m_name !== null && m_name !== ''){var index = null;index = top.ms.get_index(m_name);if(index !== null && index !== '' && typeof(top.ms.ar_modules[index])!='undefined'){top.ms.ar_modules[index].current_url = null;top.ms.ar_modules[index].loaded = false;var frame_id = top.ms.ar_modules[index].frame_id;top.$('iframe[id='+frame_id+']').remove();top.ms.ar_modules.splice(index,1) };}; }catch(excp){console.error('No module to empty');};this.check_empty_modules();};modules_handler.prototype.empty_modules = function(){top.$("iframe").each(function() { var fid = null;fid = $(this).attr('id');if(typeof(fid) != 'undefined' && fid !== null && fid !== '' && fid.indexOf('frame_') != -1){var module_name = fid.replace('frame_','');var index = null;if(fid !== null && fid !== 'frame_start' && fid.indexOf('frame_') != -1){index = top.ms.get_index(module_name);if(index !== null && index !== '' && typeof(top.ms.ar_modules[index])!='undefined'){top.ms.ar_modules[index].current_url = null;top.ms.ar_modules[index].loaded = false;var frame_id = top.ms.ar_modules[index].frame_id;top.$('iframe[id='+frame_id+']').remove();top.ms.ar_modules.splice(index,1)};};}});$.each(top.ms.ar_modules,function(i,m){if(m.name.indexOf('start') != -1){m.current_url = null;m.loaded = false;}});this.current_module = 'start';this.check_empty_modules();};modules_handler.prototype.check_empty_modules = function(){top.$("div[id^=div_frame_]").each(function() { if($(this).html().trim() == ''){$(this).hide();}});};function module(e){ var name = e.name;var path = e.path;var url_params = (typeof(e.url_params) != 'undefined') ? e.url_params : null; this.name = name; this.frame_id= 'frame_' + this.name; this.div_id= 'div_frame_' + this.name; this.path = path; this.loaded = false; this.span_title = ''; this.span_action = ''; this.current_url = ''; this.scrolling = 'no'; this.url_params =  url_params; this.reload_if_url_changes = true;if(name == 'reports' || (typeof(current_url)!= 'undefined' && current_url.indexOf('billing')!=-1)){this.reload_if_url_changes = false;};};var ms = new modules_handler('');var _module_filter = {send : function(e){let _obj = this;_obj.clear_delayed_send();let format = e?.format || 'html';let _form = window.document.forms['form_grid_filter'] ?? null;if(_form){_form.elements['format'].value = format;_form.elements['frgso'].value = Math.random(500000);_form.method = 'post';};_obj.clear_target_content(e);_form.submit();},clear_target_content(e){var f = window.document.forms['form_grid_filter'];if(f?.target){try{$('#' + f.target).contents().find("body").html("");document.querySelector('#' + f.target).contentWindow.location.replace('about:blank'); }catch(er){console.error('_module_filter.clear_target_content() failed');console.error(er);}}},hide : function(){top.$("#tr_footer").hide();top.$("#tr_module_title").hide();try{$("#tr_filter" ).hide();}catch(e){parent.$("#tr_filter" ).hide();};$('#aux_search_button').show();$('.upper_keypad').addClass('highlighted');},show : function(){top.$("#tr_footer").show();top.$("#tr_module_title").show();try{$("#tr_filter" ).show();}catch(e){parent.$("#tr_filter" ).show();};$('#aux_search_button').hide();$('.upper_keypad').removeClass('highlighted');},delayed_send : function(e){var _obj = this;var delay  = e?.delay ?? 2000;console.log('delay: ' + delay);$('#loading_search_button').show();$('#btn_search').hide();_obj._ds = setTimeout(() => {_module_filter.send();_obj.clear_delayed_send({blink:true});},delay);},clear_delayed_send : function(e){var _obj = this;_obj._tt = $( "#btn_search" ).tooltip({position: {my: "right bottom",at: "left+50 bottom+65",collision: "none"}});try{$('#loading_search_button').hide();$('#btn_search').show();if(_obj?._ds){clearTimeout(_obj._ds);_obj._ds = null;if(e?.blink){blink('#btn_search');_obj._tt.tooltip("open");setTimeout(() => {_obj._tt.tooltip("close")},3000);};};}catch(e){}},z : ''};$('.body_grid_filter .grid_filter_field select, .body_grid_filter .grid_filter_field input').live('change',function(){_module_filter.clear_delayed_send({blink:true});});function ui_confirm(e){var result = false;let type = e.type ?? 'form';  let icon = e.icon ?? '';  e.content += "<div style='width:" + ($(self).width() / 2) + "px; height:1px;'></div>";_jconfirm = $.confirm({title : e.title,content : e.content,icon : icon,animation : 'top',closeAnimation: 'scale',buttons : {accept : {text  : top._tx.common.accept,btnClass : 'btn-orange',action : function () {result = true;},foo : true},cancel : {text : top._tx.common.cancel,action  : function() {result = false;},foo : true}}});return _jconfirm;};async function ui_alert(e){let error = false;let type = e.type ?? 'orange';let icon = e.icon ?? '';let close_icon = e.close_icon ?? false;let bg_opacity = e.bg_opacity ?? null;if(error == false){if(type == 'error' || type == 'cancel'){type = 'red';icon = 'fa fa-error';}else if(type == 'warning'){type = 'purple';icon = 'fa fa-warning';}else if(type == 'ok' || type == 'success'){type = 'green';icon = 'fa fa-circle-check'}else if(type == 'idea'){type = 'orange';icon = 'fa fa-star';};if(typeof(e) == 'string'){e = {content:e};};if(typeof(e.buttons) != 'undefined'){var buttons = e.buttons;}else{var buttons = {accept : {text  : top._tx.common.accept,btnClass : 'btn-' + type,action : function () {return true;},foo : true},z : null};};var params = {icon : icon,closeIcon: close_icon,bgOpacity: bg_opacity,type : type,animation : 'scale',animateFrom : 'top',closeAnimation: 'scale',buttons : buttons};params.title = e.title ?? '';params.content = e.content ?? (e.msg ?? (e.text ?? ''));if(!params.content_type || params.content_type != 'html'){params.content_type = "html";params.content = "<div style='min-height:40px;margin:10px;padding:10px;'>" + params.content + "</div>";};if(typeof(e.content_type) == 'undefined'){params.content = params.content.replaceAll('\n','<br />');}else if(e.content_type == 'html'){var a = 1;};let av_width = $(self).width();let new_width = (av_width / 2);params.content += "<div style='width:" + new_width + "px;height:1px;'></div>";  try{var _jc = await $.confirm(params);_jconfirm = _jc;}catch(e){var _jc = await top.$.confirm(params);top._jconfirm = _jc;}; await check_confirm_box_position(e);};return _jc;};var _jconfirm = null;async function check_confirm_box_position(e){setTimeout(function(){var error = false;if($('.jc-bs3-container').length > 0){var cnt = $('.jc-bs3-container');var cell = $('.jconfirm-cell');var cpane = $('div.jconfirm-content-pane');}else if(top.$('.jc-bs3-container').length > 0){var cnt = top.$('.jc-bs3-container');var cell = top.$('.jconfirm-cell');var cpane = top.$('div.jconfirm-content-pane');}else {error = true;};if(typeof(e.top_pos) != 'undefined'){var top_pos = e.top_pos;}else{var top_pos = ((self.window.innerHeight / 2) - (cnt.height() / 2) - 100);if(top_pos <= 0){top_pos = ((top_pos * -1) + 10);};};let ctp = cell.css('top').replace(' ','');ctp = ctp.replace('px','');if(ctp.indexOf('%') != -1){ctp = ctp.replace('%','');ctp = Math.round(self.window.innerHeight * (ctp / 100));}; if(ctp > top_pos){let css_top_pos = top_pos.toString().replace('px','') + 'px';let max_height = (self.window.innerHeight - (150 + parseInt(top_pos))).toString() + 'px';cell.css({"top" : css_top_pos}); }else{let css_ctp = ctp.toString().replace('px','') + 'px';let max_height = (self.window.innerHeight - (150 + parseInt(ctp))).toString() + 'px';cell.css({"top" : css_ctp}); }},20);};function close_ui_alert(){try{if(self?._jconfirm){console.log('closing self');_jconfirm.close();_jconfirm = null;};if(parent?._jconfirm){console.log('closing parent');parent?._jconfirm.close();_jconfirm = null;};if(top?._jconfirm){console.log('closing top');top?._jconfirm.close();_jconfirm = null;};}catch(e){let error = e;console.log(error);};}; var _dfi = {show : function(e){let _obj = this;let o = $('#div_dark');let i = $('#div_form_inline');let c = i.find('.dfi_content');let x = i.find('.dfi_close');let css = {'border':"2px solid #28567E",'background':"#ffffff"};i.css(css);  i.show();o.show();x.show();_obj.resize();_module_filter.hide();},hide : function(button){let _obj = this;try{let _do = $('#div_dark');let _df = $('#div_form_inline');let _dc = _df.find('.dfi_close');let _con = _df.find('.dfi_content');let _form = _df.find('form');let ob_type = _form.attr('ob_type');let module_name = self.current_module ?? null;let frame_name  = parent.name ?? null; _do.hide();_df.hide();_dc.hide(); if(typeof(button) == 'undefined' || button.id != 'div_form_inline_close'){$.each(_df.find('form'), function( index, _form ) {_form.reset();});};_module_filter.show();}catch(er){console.log(er);}},load_html : function(html){var dfic = $('#div_form_inline .dfi_content');stop_scrolling();hacer_scroll_hacia = 0;scroll_to_position();dfic.html(html);},load_url : function(e){let _obj = this;let url = '';let force_request = false;if(typeof(e) == 'object'){url = e.url;force_request = (typeof(e.force_request) != 'undefined')? e.force_request : false;}else{url = e;};let _dfi = $('#div_form_inline');let _dfic = _dfi.find('.dfi_content');if(_dfic.length == 0 && top._ses.user.role_id <= 20){ui_alert({text : '#div_form_inline .dfi_content does not exist',type : 'warning'})};stop_scrolling();hacer_scroll_hacia = 0;scroll_to_position();if(dfi_current_url != url || _dfic.html() == '' || force_request == true){$.ajax({url: url,cache: false}).done(function(html) {_dfic.html(html);_obj.resize();});_dfic.load(url);dfi_current_url = url;}else{$('#div_dark').show();}},empty : function(e){$('#div_form_inline .dfi_content').html('');},clean : function(e){hide_div_form_inline();if(typeof(ar_timeout_loaded_things['div_form_inline'])!='undefined'){clearInterval(ar_timeout_loaded_things['div_form_inline']);};if(typeof(ar_timeout_loaded_things['#div_form_inline .dfi_content'])!='undefined'){clearInterval(ar_timeout_loaded_things['#div_form_inline .dfi_content']);}; _ab_handler.reactivate_all_buttons();},reset : function(e){try{var _window = self;if(typeof(e?.form_selector) != 'undefined'){ var _p_form = _window.$(e.form_selector); _p_form?.reset?.(); _p_form?.find('.input_yes_and_no').each(function(){var input_name = _window.$(this).attr('input_name').replace('[','_').replace(']','');_window._input_yes_and_no.set_default({selector : 'div.input_yes_and_no[input_name='+input_name+']'});$('input[type=hidden]#'+input_name+'').trigger('change');}); if(typeof(_window?._dropzones_handler?.ar_dropzones) != 'undefined'){_window.$.each(_window._dropzones_handler.ar_dropzones,function(i,_drz){_p_form?.find('.dz-preview').remove();_p_form?.find('.dz-message').fadeIn();_p_form?.find('input[name=new_image]').val('');_drz?.removeAllFiles(true);});}; _p_form?.find('.ui_tags_input > .tag').each(function(){$(this).find('.tag-i').trigger('click');});_p_form?.find('.ui_tags_input .type-zone').val('');_p_form?.find('.ui_tags_input > .tag').remove(); _p_form?.find('select[multiple]').each(function(){var _x = $(this);try{var _fsi = _x.fastselect().data('fastselect');if(typeof(_fsi) != 'undefined' && _fsi.length > 0){_fsi.destroy();_x.fastselect();};}catch(e){console.log(_x.attr('id') + ' is not a fastselect instance');}});};}catch(e){console.error(e);}},open_record : function(e){ _dfi.clean(); close_all_detail_tabs();  $('.tdyn_tr[row_id=' + e.row_id + '] td').last().trigger('click');},resize : function(){let _obj = this;let _dfi = $('#div_form_inline');let _dfic = _dfi.find('.dfi_content');if(_dfi.length > 0){_dfi.css({'max-width' : (window.innerWidth - 100) + 'px','max-height' : (window.innerHeight - 100) + 'px','overflow' : 'hidden','left' : '50px'});};setTimeout(function(){let _fw    = _dfic.find('form');let _title = _fw.find('.dfi_title');if (_title.length > 0) {_title.insertBefore('#div_form_inline form');};if(_fw.length > 0){_fw.addClass('scrolling_area');}; if(_fw.length > 0 && _dfi.length > 0){let dfi_top = _dfi[0].getBoundingClientRect().top;let fw_top  = _fw[0].getBoundingClientRect().top;let height_diff = _dfi.height() - (fw_top - dfi_top);_fw.css({'max-width'  : (_dfi.width() - 5) + 'px','max-height' : (height_diff - 5) + 'px','overflow-y' : 'scroll','overflow-x' : 'hidden'});_dfi.css({'left' : ((window.innerWidth - _dfi.width()) / 2) + 'px'});}},500);},foo : ''};function show_div_form_inline(){return _dfi.show();};function clean_div_form_inline(){return _dfi.clean();};function empty_div_form_inline(){return _dfi.empty();}; function _dfi_clean(){return _dfi.clean();};function hide_div_form_inline(button){return _dfi.hide(button);};function load_url_into_dfi(e){return _dfi.load_url(e);};function load_html_into_dfi(html){return _dfi.load_html(html);}; function open_record_after_creation(e){return _dfi.open_record(e);};$('.dfi_close').live('click',function(){_dfi.hide(this);});$('#div_dark').live('click',function(){_dfi.hide();});function load_module(url){if(url != ''){if(url.indexOf('?') == -1){url += '?a=1';};aux = url.split('/'); abs_url =  top._app.root_control + url;mod_name = ms.get_name_from_url(url);frame = 'frame_'+mod_name;top_menu_id = get_top_menu(url,'url');url_comprobar = ''; if(top_menu_id == null){top_menu_id = 'transmenu_inicio';};menu_cambiar_sel(document.getElementById(top_menu_id)); if(!ms.exists(mod_name)){ms.add({url:url,name:mod_name});};ms.show_div(mod_name);if(!ms.is_already_loaded(mod_name,url_comprobar)){eval(frame+'.location.href = abs_url;');}}};function open_my_profile(){teacher_menu__select_a_course.selectedIndex = 0;url = 'my_profile/index.php';mod_name = ms.get_name_from_url(url);frame = 'frame_'+mod_name;url_comprobar = '';if(!ms.exists(mod_name)){ms.add({url:url,name:mod_name});};ms.show_div(mod_name);if(!ms.is_already_loaded(mod_name,url_comprobar)){abs_url =  top._app.root_control + url;eval(frame+'.location.href = abs_url;');};}; function get_top_menu(str,type){if(typeof(type) == 'undefined'){type = 'url';};if(type == 'raiz'){raiz_modulo = str;}else{url = str;aux = url.split('/');if(aux[0] == 'estructura'){mindex = 1;}else{mindex = 0;};raiz_modulo = aux[mindex];};cad_urls_principales = document.getElementById('div_cad_menus_urls').innerHTML;ar_urls_principales = cad_urls_principales.split(',');top_menu_id = null;if(ar_urls_principales.length > 0){for(i=0;i<ar_urls_principales.length;i++){aux2 = ar_urls_principales[i].split('|');menu_id = aux2[0];url2= aux2[1];aux3 = url2.split('/');if(raiz_modulo == aux3[mindex]){top_menu_id = menu_id;}}};return top_menu_id;};function menu_cambiar_sel(elem){cad_menus = document.getElementById('div_cad_menus_principales').innerHTML;ar_menus = cad_menus.split(',');if(ar_menus.length > 0){for(i=0;i<ar_menus.length;i++){temp_cn = document.getElementById(ar_menus[i]).className;aux_class = (temp_cn.indexOf('menu_h15') != -1)?'menu_h15':'menu_h25';document.getElementById(ar_menus[i]).className = 'menu_no_sel ' + aux_class;};};if(typeof(elem)!= 'undefined' && elem != null){temp_cn2 = elem.className;aux_class2 = (temp_cn2.indexOf('menu_h15') != -1)?'menu_h15':'menu_h25';elem.className = 'menu_sel ' + aux_class2;};};var menu_hover = null; function menu_ch(elem){menu_hover = elem.id;};function open_reports_module(e){var mod_name = ms.get_name_from_url(e.url);if(e.url.indexOf('?') == -1){e.url += '?a=1';};var abs_url =  top._app.root_control + e.url;if($('iframe[name^=frame_reports]').length > 0 && module_has_been_loaded_already(mod_name,abs_url,null) == true){var reports_frame_name = $('iframe[name^=frame_reports]').attr('id');var _reports_group = $('#' + reports_frame_name).contents().find('select[name=reports_group]');eval("var _reports_tool = " + reports_frame_name + "._reports_tool");if(typeof(_reports_tool) != 'undefined'){_reports_tool.dom._reports_group.val(e.group_id);_reports_tool.dom._reports_group.trigger('change');}else{ui_alert('Espera un momento');};ms.show_div(mod_name);}else{load_url({button_name:e.button_name,url:e.url});};};$('.detail_tabs__tabs_responsive').live('mouseover',function(){$(this).addClass('detail_tabs__tabs_responsive_hover');$('.detail_tabs__frames').addClass('detail_tabs__frames_responsive_hover');});$('.detail_tabs__tabs_responsive').live('mouseout',function(){$(this).removeClass('detail_tabs__tabs_responsive_hover');$('.detail_tabs__frames').removeClass('detail_tabs__frames_responsive_hover');});$('[data-toggle="tooltip"]').tooltip();$(window).resize(function(e){if($('.detail_tabs__tabs').length){ckeck_responsive_tabs_menu();}}); function ckeck_responsive_tabs_menu(){if (window.matchMedia('(max-width: 680px)').matches) {     $('.detail_tabs__tabs').addClass('detail_tabs__tabs_responsive');$('.td_row_details').removeClass('pl20 pr20');$('.td_row_details').addClass('force_float_left');}else{$('.detail_tabs__tabs').removeClass('detail_tabs__tabs_responsive');$('.td_row_details').addClass('pl20 pr20');$('.td_row_details').removeClass('force_float_left');};}; function open_detail_tabs(e){var row_id = e.row_id;$(".tdyn_tr_details").hide();if(top._ses.school_id == 100545401 && current_module == 'pre_enrollments'){$("tr[id^='tr2_']").hide();$('#table_dynamic_grid .titles_row_1').hide();$('.upper_keypad').hide();};$('#div_page_indexer_header').hide();$('#div_page_indexer_form').hide();$('#div_page_indexer_index').hide();_module_filter.hide();$('#tr_' + row_id).show();$("#tr2_" + row_id).show();set_style_current_row('tr2_'+row_id);}; function close_detail_tabs(e){var row_id = e.row_id;$('#tr_' + row_id).hide();if($.inArray(top._ses.school_id,[10001,10004,10005,10006,10007,10008,10009,10010,10011,20000]) != -1 && current_module == 'pre_enrollments'){$("tr[id^='tr2_']").show();$("#tr2_" + row_id).show();$('#table_dynamic_grid .titles_row_1').show();};$('#div_page_indexer_header').show();$('#div_page_indexer_form').show();$('#div_page_indexer_index').show();$('.upper_keypad').show();_module_filter.show();remove_style_current_row('tr2_'+row_id);};function close_all_detail_tabs(){$('.tdyn_tr').each(function(){var row_id = $(this).attr('row_id');$('#tr_' + row_id).hide();remove_style_current_row('tr2_'+row_id);});};  function see_detail_tabs(row_id, adds, trigger_object, tabs_container, td_details){if(typeof(trigger_object)=='undefined'){trigger_object = 'row';};if(typeof(tabs_container)=='undefined'){tabs_container = current_module + '_tabs_container';};tabs_container  = tabs_container.replace('control_','');if (typeof(td_details) == 'undefined') {        td_details = $("#td_details_" + row_id);    }else{ td_details = $("#" + td_details.id);    };if(trigger_object == 'row' && typeof(last_tool) != 'undefined' && last_tool != 'undefined' && last_tool != null){tool = last_tool;adds = set_param_value('tool',tool,adds);}else{tool = get_param_value('tool',adds);last_tool = tool;};tool_id  = tool + '_' + row_id;if(typeof(adds) == 'undefined'){adds = '';};ckeck_responsive_tabs_menu();if(top.cb.container_exists(tabs_container)){adds += '&load_tabs=0';if(td_details.html() == ''){tabs_menu[row_id] = new tabs_handler(row_id,str_module_tools); container_params = new Array();ar_actions = tabdyn.actions_x_row[row_id].actions;for(i=0;i < ar_actions.length;i++){str_onclick = "change_tab('"+ row_id+ "','"+ ar_actions[i].name+ "_"+ row_id+ "'); tabs_menu['"+ row_id+ "'].show_ajax_div('"+ ar_actions[i].name+ "_"+ row_id+ "','"+module_root_path+"/actions.php?action=see_"+ ar_actions[i].name+ "&use_ajax=1&row_id="+ row_id+ adds+ "');";container_params[i] = 'ONCLICK_' + ar_actions[i].name + '|$' + str_onclick;};container_params[i] = '_A_ROW_ID_A_' + '|$' + row_id;replacing_string = container_params.join('$^$'); var tabs_html = top.cb.get_content2(replacing_string,tabs_container);if(typeof(tabdyn.adds_ac_li_det) != 'undefined'){search = new RegExp('&__ADDS_AC_LI_DET__','g');search2 = new RegExp('&amp;__ADDS_AC_LI_DET__','g');tabs_html = tabs_html.replace(search,tabdyn.adds_ac_li_det);tabs_html = tabs_html.replace(search2,tabdyn.adds_ac_li_det);};$('#td_details_' + row_id).html(tabs_html); verify_permissions_over_tabs(row_id);};ckeck_responsive_tabs_menu(); div = $('#div_tab_'+tool_id); if(div.html() == ''){url = module_root_path + "/actions.php?action=see_" + tool + "&row_id=" + row_id + adds;tabs_menu[row_id].show_ajax_div(tool_id,url);div.show();};change_tab(row_id,tool_id);if(is_visible('tr_' + row_id) == 1 && get_active_tab(row_id)==tool_id && trigger_object != 'action_button'){close_detail_tabs({row_id:row_id});}else{open_detail_tabs({row_id:row_id});};}else{adds += '&load_tabs=1';ckeck_responsive_tabs_menu();if(typeof(tabdyn.adds_ac_li_det) != 'undefined'){var search = new RegExp("&",'g');temp_aald = tabdyn.adds_ac_li_det;temp_aald = temp_aald.replace(search,"@");adds += '&adds_ac_li_det=' + temp_aald;};if(td_details.html() == ''){url = module_root_path + "/actions.php?action=load_row_tabs&row_id=" + row_id + adds;request_iframe.location = url;};if(is_visible('tr_' + row_id) == 1){close_detail_tabs({row_id:row_id});}else{open_detail_tabs({row_id:row_id});};};ckeck_responsive_tabs_menu();}; var delimiter_td = '$^d$';var delimiter_tr = '$^r$';var delimiter_title = '$^t$';var delimiter_cols = '$^cols$'; function actions_column(){this.title = top._tx.common.actions;this.width  = 70;}; function dynamic_grid(table_id){ this.innerHTML = ''; this.interval_af = null; this.ar_rows = new Array(); this.ar_row_ids = new Array(); this.table_id = table_id; this.columns = new Array(); this.titles_tr_add = " class='titles_row_1' "; this.titles_td_add = " "; this.tr_add = " class='cp tdyn_tr' "; this.td_add = " "; this.record_image = ''; this.show_actions_column = false; this.actions_column = new actions_column(); this.function_triggered_when_clicking_a_row = ''; this.actions_x_row = new Array(); this.ar_actions = new Array(); this.not_selectable_rows = ''; this.load_completed = false; this.adds_ac_li_det = '';}; dynamic_grid.prototype.add_title = function (c){ ar_e  = c.split(delimiter_td);var h = "<tr "+ this.titles_tr_add + ">";var th;var title;if(ar_e.length > 0){for(k=0; k < ar_e.length; k++){var text_a = ar_e[k];var style = '';if(this.columns[k].width != '*' && IsNumeric(this.columns[k].width)){style = "style='width:" + this.columns[k].width + "px;'";};if(this.columns[k].name == 'img'){style = "style='width:20px !important; max-width:20px !important; overflow:hidden;'";this.columns[k].width = 20;}; if(text_a.indexOf('_record_image_')!=-1){th = text_a.replace('_record_image_',this.record_image);}else if(this.columns[k].name == 'row_id'){th = "<input type='checkbox' id='chk_select_all' name='chk_select_all' onclick=\"tabdyn.select_all(this);\">";}else{th = text_a;}; h += "<td id='tdyn_ttl_"+this.columns[k].name+"' " + this.titles_td_add + " " + style + " width='" + this.columns[k].width + "'>" + th + "</td>";};};if(this.show_actions_column == true){var tta = this.titles_td_add;tta = tta.replace('titles_td','titles_td vis_5');h += "<td " + tta + " class='vis_5' width='" + this.actions_column.width + "' >" + this.actions_column.title + "</td>";};h += "</tr>";this.innerHTML += h;return true;}; dynamic_grid.prototype.select_all = function (checkbox){if(checkbox.checked == true){for(i=0;i<this.ar_row_ids.length;i++){document.getElementById('check_'+this.ar_row_ids[i]).checked = true;vcheck2(document.getElementById('check_'+this.ar_row_ids[i]),this.ar_row_ids[i],'form_module_list','str_records');};}else{for(i=0;i<this.ar_row_ids.length;i++){document.getElementById('check_'+this.ar_row_ids[i]).checked = false;vcheck2(document.getElementById('check_'+this.ar_row_ids[i]),this.ar_row_ids[i],'form_module_list','str_records');}}}; dynamic_grid.prototype.add_row_sequentially = function (index,cad_cols){var error = false;if(index < this.ar_rows.length && this.ar_rows.length > 0){ cd = this.ar_rows[index];var ar_te = cd.split(delimiter_td);var ar_e = new Array();var r;if(typeof(cad_cols) != 'undefined'){  ar_temp_cols = cad_cols.split(',');j = 0;for(i3=0; i3 < ar_temp_cols.length; i3++){  if(this.column_exists(ar_temp_cols[i3]) == true){ar_e[j] = ar_te[i3];j++;};};}else{  ar_e = ar_te;};var hea = ar_e[0].split(',');var ri = hea[0];var na = '';var acc = '';if(typeof(this.actions_x_row[ri]) != 'undefined'){var na = this.actions_x_row[ri].actions[0].name;var acc = this.ar_actions[na].function + this.actions_x_row[ri].actions[0].parameters;};this.ar_row_ids[index] = ri;var h = "<tr row_id='" + ri + "' id='tr2_" + ri + "' " + this.tr_add + " when_click=\"" + acc + ";\" >";h += "<td class='reg_td_c tdyn_td_checkbox' width='20'>";var f_sel = (hea[1] == '1')?true : false;var selection_type = (hea[2] == '1')?'checkbox' : 'radio';if(f_sel == true){if(selection_type == 'checkbox'){h += "<input type='checkbox' style='height:15px;width:15px;' id='check_" + ri + "' onclick=\"vcheck2(this,'" + ri + "','form_module_list','str_records'); \">";}else{h += "<input type='radio' style='height:15px;width:15px;'name='input_seleccionado' id='radio_" + ri + "' onclick=\"vradio2(this);\" value='" + ri + "'>";};};h += "</td>";if(ar_e.length > 1){for(i=1; i < ar_e.length; i++){nc = this.columns[i].name;text_html = '';text_html = ar_e[i].replace('_REG_IMG_',this.record_image);h += "<td class='tdyn_row_"+nc+"' " + this.td_add + " " + this.columns[i].reg_adds + " >";h += "<span id='span_" + nc + "_" + ri + "'>";h += text_html;h += "</span>";h += "</td>";};if(this.show_actions_column == true){h += "<td align='center' width='" + this.actions_column.width + "' style='white-space: nowrap;' class='vis_5'>" + this.actions_x_row[ri].getHTML(this.ar_actions) + "</td>";};};h += "</tr>";colspan = this.columns.length;h += "<tr id='tr_" + ri + "' class='tdyn_tr_details' style='display:none;'><td id='td_details_" + ri + "' colspan='" +colspan + "' class='pl20 pr20 border5 td_row_details' style='border-top:none;' bgcolor='#FFFFFF'></td></tr>";if(this.load_completed == false){ this.innerHTML += h;ni = index+1;tabdyn.add_row_sequentially(ni);}else{ try{document.getElementById('table_dynamic_grid').innerHTML += h;}catch(e){$('#table_dynamic_grid').html(h);};};r = true;}else{this.load_completed = true;var html = '';html += "<table id='table_dynamic_grid' name='table_dynamic_grid' class='titles_ta'>" + this.innerHTML + "</table>";$('#div_table_dynamic_grid').html(html);r = false;};return r;}; dynamic_grid.prototype.update_row = function(ri,c){var ar = c.split(delimiter_tr);if(ar.length > 0){for(i=0;i<ar.length;i++){aux = ar[i].split(delimiter_td);a = aux[0];v = aux[1];$('#span_'+a+'_'+ri).html(v);}}}; dynamic_grid.prototype.column_exists = function (ncol){var x = false;for(i=0; i < this.columns.length; i++){if(this.columns[i].name == ncol){x = true;};};return x;}; dynamic_grid.prototype.set_innerHTML = function (c){ar_elementos = c.split(delimiter_title);var t = ar_elementos[0];var f = ar_elementos[1];this.add_title(t);this.ar_rows = f.split(delimiter_tr);this.add_row_sequentially(0);}; function column(n,w,r,t = ''){  this.name = n;this.width = w;this.reg_adds = r;this.title = t;};  function action(n,t,i,f){this.name = n;this.title = t;this.imagen = i;this.function = f;this.imagen_width  = 14;this.imagen_height = 14;}; action.prototype.getHTML = function (p){p = p.replace("')", "','action_button')");var h = "<span title='" + this.title + "' class='cp' onclick=\"" + this.function + p + ";\">";h +="<img src='" + this.imagen + "' align=absmiddle width='" + this.imagen_width + "' height='" + this.imagen_height + "'>";h += "</span>&nbsp;";return h;}; function action_x_row(n,p){this.name = n;this.parameters = p;this.parameters = this.parameters.replace("')", tabdyn.adds_ac_li_det + "')");}; function actions_x_row(c){this.delimiter_1 = '$^$';this.delimiter_2 = '|$';this.actions = new Array();var ar_a = c.split(this.delimiter_1);if(ar_a.length > 0){for(ai=0;ai < ar_a.length;ai++){temp = ar_a[ai].split(this.delimiter_2);n = temp[0];p = temp[1];this.actions[ai] = new action_x_row(n,p);}}}; actions_x_row.prototype.getHTML = function (ar_a){HTML = '';for(i=0; i < this.actions.length; i++){if(typeof(this.actions[i].name)!='undefined' && typeof(ar_a[this.actions[i].name])!='undefined'){HTML += ar_a[this.actions[i].name].getHTML(this.actions[i].parameters);};};return HTML;}; function verify_permissions_over_tabs(row_id){ar_possible_actions = tabs_menu[row_id].str_tabs.split(',');ar_record_actions = tabdyn.actions_x_row[row_id].actions;for(i=0;i <= ar_possible_actions.length;i++){allowed_action = false;for(j=0;j < ar_record_actions.length;j++){tool_name = ar_record_actions[j].name + '_' + row_id;if(tool_name == ar_possible_actions[i]){allowed_action = true;};};if(allowed_action == false && typeof(ar_possible_actions[i]) != 'undefined' && $('#li_' + ar_possible_actions[i]).length > 0){$('#li_' + ar_possible_actions[i]).hide();}}};var _grid_list = {resize_cell : function(e){var error = false;if(typeof(e.selector) == 'undefined' || typeof(e.percentage) == 'undefined'){error = true;};if(error == false){var window_width = top.$(window).width();try{var pixel_ratio = window.devicePixelRatio;var body_zoom = $('body').css('zoom');}catch(e){var body_zoom = 1;var pixel_ratio = 1;};var final_width = parseInt(((window_width / body_zoom) / 1) * e.percentage);$(e.selector).css({width:final_width});}},z : ''};function page_indexer(e){this.html = '';this.index_html= '';this.ar_pages = new Array();this.page_indexer_from = e.page_indexer_from;this.page_indexer_to = e.page_indexer_to;this.page_indexer_total = e.page_indexer_total;this.qt_pages = e.qt_pages;this.current_page= e.current_page;this.get_html();};page_indexer.prototype.go_to = function(index){form = $('#form_page_indexer');form_page_indexer.offset.value = index;form_page_indexer.submit();};page_indexer.prototype.change_showing_msg = function(qt_change){if($('#page_indexer_to').length > 0){var pi_to = $('#page_indexer_to');var pi_total = $('#page_indexer_total');current_to = parseInt(pi_to.html());current_total = parseInt(pi_total.html());pi_to.html(current_to + qt_change);pi_total.html(current_total + qt_change);if(parseInt(pi_total.html()) <= 0){$('#table_page_indexer_showing').fadeOut();$('#table_page_indexer_no_results').fadeIn();}else{$('#table_page_indexer_showing').fadeIn();$('#table_page_indexer_no_results').fadeOut();}}};page_indexer.prototype.get_html = function (){this.html = "<table align='left' class='tal' cellspacing='0' cellpadding='0'>"+ "<tr>"+ "<td>"+ "<table id='table_page_indexer_showing' width='100%' class='page_indexer_1' style='display:block'>"+ "<tr>"+ "<td nowrap>"+ top._tx.pagination.showing + " <span id='page_indexer_from'>_PAGE_INDEXER_FROM_</span> "+ top._tx.pagination.to + " <span id='page_indexer_to'>_PAGE_INDEXER_TO_</span> "+ top._tx.pagination.of + " <span id='page_indexer_total'>_PAGE_INDEXER_TOTAL_</span>"+ "<br />"+ "</td>"+ "<td>"+ "<div align='right'>"+ this.get_index_html()+ "</div>"+ "</td>"+ "</tr>"+ "</table>"+ "</td>"+ "<td>"+ "<table id='table_page_indexer_no_results' width='100%' class='page_indexer_1' style='display:none'>"+ "<tr>"+ "<td nowrap>"+top._tx.pagination.zero_results+"</td>"+ "</tr>"+ "</table>"+ "</td>"+ "<td>"+ "<input type='button' class='nw_button_2' value='"+top._tx.pagination.reload_list+"' onclick='form_page_indexer.submit();'>"+ "</td>"+ "<td width='*'></td>"+ "</tr>"+ "</table>";this.html = this.html.replace('_PAGE_INDEXER_FROM_',this.page_indexer_from);this.html = this.html.replace('_PAGE_INDEXER_TO_',this.page_indexer_to);this.html = this.html.replace('_PAGE_INDEXER_TOTAL_',this.page_indexer_total);return this.html;};page_indexer.prototype.set_divs = function(){$('#div_page_indexer_header').html(this.html);$('#div_page_indexer_index').html(this.index_html);};page_indexer.prototype.get_index_html = function(){var previous_page = this.current_page - 1;this.ar_pages[0] = "<span class='cp page_indexer_1' onclick='_page_indexer.go_to("+previous_page+");'>&lt; "+top._tx.pagination.previous+"</span>";var delta = 5;var next_page = this.current_page + 1;this.initial_page = Math.max((this.current_page) - delta, 1);this.final_page = Math.min((this.current_page + delta),this.qt_pages);if(this.final_page < 10){this.final_page = Math.min(10,this.qt_pages);};if(this.initial_page > 1){this.initial_page = Math.min(this.final_page - 5,this.initial_page);};var j = 1;for(i = this.initial_page; i <= this.final_page; i++){if(this.current_page == i){clase = 'page_indexer_2';}else{clase = 'page_indexer_1';};this.ar_pages[j] = "<span class='cp "+clase+"' onclick='_page_indexer.go_to("+i+");'>"+i+"</span>"; j++;};this.ar_pages[j] = "<span class='cp page_indexer_1' onclick='_page_indexer.go_to("+next_page+");'>"+top._tx.pagination.next+" &gt;</span>";this.index_html = this.ar_pages.join(' | ');return this.index_html;};page_indexer.prototype.get_form = function(){this.form_html = "<form accept-charset='" + top._app.charset + "' name='form_page_indexer' id='form_page_indexer' method='post' action='"+this.action+"'>";ar_fields = this.parameters.split('$^');if(ar_fields.length > 0){for(i=0;i<ar_fields.length;i++){aux = ar_fields[i].split('$|');field = aux[0];value = aux[1];if(typeof(value) == 'Object'){value = value.join(',');};this.form_html += "<input type='hidden' name='"+field+"' value='"+value+"'>";};};this.form_html += "</form>";return this.form_html;};page_indexer.prototype.set_form = function(action,parameters){this.action = action;this.parameters = parameters;$('#div_page_indexer_form').html(this.get_form());};function toggle_elem(o){o.style.display = (o.style.display=='block') ? 'none' : 'block';};function toggle(elem_id,type){var a = $('#'+elem_id);if(a.is(':visible')){a.hide();}else{a.show();};};function toggle_object(o,s,d){if(typeof(d) == 'undefined'){d = 'block';};o.style.display = (s==0)?'none':'visible';o.style.visibility = (s==0)?'hidden':d;};function toggle2(e,d,type){var a = $('#'+e);if(d == 0 || d == 'none'){a.hide();}else{a.show();};};function is_visible(elem){return (!$('#' + elem).is(':visible')) ? 0 : 1;};function toggle_inputs_group(elem_id,texts){if(typeof(texts) != 'undefined'){tmp = texts.split(',');text_up = tmp[0];text_down = tmp[1];};var _content = 'content_' + elem_id;var _title = 'title_' + elem_id;if( $('#' + _content).is(':visible')){$('#' + _content).hide();$('#' + _title).addClass('optional_info_title_up');if(typeof(text_up) != 'undefined'){$('#' + _title).html(text_up);};}else{$('#' + _content).show();$('#' + _title).addClass('optional_info_title_down');if(typeof(text_down) != 'undefined'){$('#' + _title).html(text_down);}}}; class containers_box{constructor(){this.containers = {};};add_container(n,c){this.containers[n] = new container(n,c);};get_c(row_id,n){return this.containers[n].get_c(row_id);};get_content2(str,n){return this.containers[n].get_c2(str);};container_exists(n){return (typeof(this.containers[n]) == 'undefined') ? false : true;};};class container{constructor(n,c){this.name = n;this.content = c;}; get_c(row_id){ let b = new RegExp('_A_ROW_ID_A_','g');let temp = this.content.replace(b,row_id);return temp;}; get_c2(str){ let tx = this.content;if(str && str != ''){let ar_pairs = str.split('$^$');if(ar_pairs.length > 0){for(let i=0; i < ar_pairs.length; i++){let ar_t = ar_pairs[i].split('|$');if(ar_t[0].indexOf('ONCLICK')!=-1){let b = new RegExp('"' + ar_t[0] + '"','g');tx= tx.replace(b,'"' + ar_t[1] + '"');}else{let b = new RegExp(ar_t[0],'g');tx= tx.replace(b,ar_t[1]);}}}};return tx;};};var cb = new containers_box(); function change_tab(row_id,tool){var ar_actions = tabdyn.actions_x_row[row_id].actions;for(i=0;i<ar_actions.length;i++){$('#ali_' + ar_actions[i].name + '_' + row_id).removeClass('tab_header_selected_a');$('#li_' + ar_actions[i].name + '_' + row_id).removeClass('tab_header_selected');$('#div_tab_' + ar_actions[i].name + '_' + row_id).hide();};$('#ali_' + tool).addClass('tab_header_selected_a');$('#li_' + tool).addClass('tab_header_selected');$('#div_tab_' + tool).show();}; function change_tab_simple(tabs_id,tool){str_tabs = tabs_menu[tabs_id].str_tabs;ar_tabs = str_tabs.split(',');for(i=0;i<ar_tabs.length;i++){ $('#ali_' + ar_tabs[i]).removeClass('tab_header_selected_a');$('#li_' + ar_tabs[i]).removeClass('tab_header_selected');$('#div_tab_' + ar_tabs[i]).hide();};$('#ali_' + tool).addClass('tab_header_selected_a');$('#li_' + tool).addClass('tab_header_selected');$('#div_tab_' + tool).show();}; function get_active_tab(row_id){ar_actions = tabdyn.actions_x_row[row_id].actions;active_tab = '';for(i=0;i<ar_actions.length;i++){if($('#ali_' + ar_actions[i].name + '_' + row_id).hasClass('tab_header_selected_a')){active_tab = ar_actions[i].name + '_' + row_id;break;};};return active_tab;}; function tabs_handler(row_id,tools_string) {if(typeof(row_id) == 'undefined'){row_id = '';};this.iframes = new Array();this.ajax_divs = new Array();this.tabs = new Array();this.str_tabs = tools_string;this.row_id = row_id; this.active_tab= null;temp_tabs = tools_string.split(',');for(i=0;i<temp_tabs.length;i++){temp_tabs[i] += '_' + row_id;};this.str_tabs = temp_tabs.join(',');ar_tabs = this.str_tabs.split(',');for(i=0;i<ar_tabs.length;i++){temp_tab = new Array(); temp_tab['current_url']  = ''; temp_tab['span_title'] = ''; temp_tab['span_action'] = '';this.tabs[ar_tabs[i]] = temp_tab;};};tabs_handler.prototype.show_iframe = function (id,url){ this.active_tab = id;this.hide_all_divs();div = $('#div_tab_'+id).show();if(this.tabs[id]['current_url'] != url || window.frames['iframe_'+id].document.body.innerHTML == ''){this.tabs[id]['current_url'] = url; eval('iframe_'+id+'.location=url;');};if(this.tabs[id]['span_title'] != ''){set_breadcrumbs(this.tabs[id]['span_title'],this.tabs[id]['span_action']);};use_title_from_active_sub_frame('iframe_'+id);}; function use_title_from_active_sub_frame(frame_id){qt_frames = window.frames[frame_id].frames.length;if(qt_frames > 0){for(i=0; i < qt_frames; i++){name_subframe = window.frames[frame_id].frames[i].name;name_div = name_subframe.replace('iframe_','div_tab_'); aux_div = null;if(typeof(window.frames[frame_id].$('#' + name_div))!= 'undefined'){aux_div = window.frames[frame_id].$('#' + name_div);}; if(aux_div != null && aux_div.is(':visible')){aux_st = ''; aux_sa = '';if(typeof(window.frames[frame_id].frames[name_subframe].span_title) != 'undefined'){aux_st = window.frames[frame_id].frames[name_subframe].span_title;aux_sa = window.frames[frame_id].frames[name_subframe].span_action;top.set_breadcrumbs(aux_st, aux_sa);}}}}}; tabs_handler.prototype.show_ajax_div = function (id,url,strict){var aux_action = get_param_value('action',url).replace('see_',''); if(typeof(str_module_tools)!= 'undefined'){var ahm = str_module_tools.split(',');for(i=0;i<ahm.length;i++){if(ahm[i] == aux_action){last_tool = aux_action;}}};this.hide_all_divs();div = $('#div_tab_'+id);div.show();if(typeof(strict) == 'undefined'){strict=false;};if(typeof(this.tabs[id]['current_url'] == 'undefined') || this.tabs[id]['current_url'] != url){div_loading = top.$('#div_loading_1');if((strict == false && div.html() == '') || strict == true){ajax_load_get('div_tab_'+id,url);this.tabs[id]['current_url'] = url; };};if(this.tabs[id]['span_title'] != ''){set_breadcrumbs(this.tabs[id]['span_title'],this.tabs[id]['span_action']);};};tabs_handler.prototype.hide_all_divs = function (){array_tabs = this.str_tabs.split(',');for(i=0;i<array_tabs.length;i++){div = $('#div_tab_'+array_tabs[i]);div.hide();};};tabs_menu = new Array(); var _ih_gxc = { create_cache_options : function(e,_obj){ var ar_dm = top._dm.ar_gxc ?? [];var cache_type = e.cache_type;$.each(ar_dm,function(i,gxc){var c = top._dm.ar_courses[gxc.c_id];var lv_id = c.lv_id;var ar_id = c.ar_id;var b_id = gxc.b_id;var found = false;var cache_row_id = '';var ar_search = []; if(cache_type == 'gxc-from-level'){ar_search  = [lv_id,'[all]'];}else if(cache_type == 'gxc-from-area-and-level'){ar_search  = [ar_id + '-' + lv_id,ar_id + '-' + '[all]','[all]' + '-' + lv_id,'[all]' + '-' + '[all]'];};$.each(ar_search,function(i,s){if(e.ar_sel_ids_nc.indexOf(s) != -1){cache_row_id = s;found = true;}});if(found == true){ var record = JSON.parse(JSON.stringify(gxc));Object.assign(record, c);  var op_prm = {record : record,op_caption : e.caption,op_value : e.value};if(typeof(e.ar_attrs) != 'undefined'){op_prm.ar_attrs = e.ar_attrs;};var _option = _obj.create_select_option(op_prm);top._cache.inputs_options[cache_type].content[cache_row_id].push(_option);}});},z : ''}; var _ih_gxl = { create_cache_options : function(e,_obj){ var ar_dm = top._dm.ar_gxl ?? [];var cache_type = e.cache_type;$.each(ar_dm,function(i,gxl){var at_id = gxl.at_id;var lv_id = gxl.lv_id;var b_id = gxl.b_id;var found = false;var cache_row_id = '';var ar_search = []; if(cache_type == 'gxl-from-level'){ ar_search  = [lv_id,'[all]'];}else if(cache_type == 'gxl-from-level-and-branch'){ar_search  = [b_id + '-' + lv_id,b_id + '-' + '[all]','[all]' + '-' + lv_id,'[all]' + '-' + '[all]'];}else if(cache_type == 'gxl-from-level-and-at'){ar_search  = [at_id + '-' + lv_id,at_id + '-' + '[all]','[all]' + '-' + lv_id,'[all]' + '-' + '[all]'];}else if(cache_type == 'gxl-from-level-branch-and-at'){ar_search  = [at_id + '-' + b_id + '-' + lv_id,'[all]' + '-' + b_id + '-' + lv_id,at_id + '-' + '[all]' + '-' + lv_id,at_id + '-' + b_id + '-' + '[all]','[all]' + '-' + '[all]' + '-' + lv_id,'[all]' + '-' + b_id + '-' + '[all]',at_id + '-' + '[all]' + '-' + '[all]','[all]' + '-' + '[all]' + '-' + '[all]'];};$.each(ar_search,function(i,s){if(e.ar_sel_ids_nc.indexOf(s) != -1){cache_row_id = s;found = true;}});if(found == true){var op_prm = {record : gxl,op_caption : e.caption,op_value : e.value};if(typeof(e.ar_attrs) != 'undefined'){op_prm.ar_attrs = e.ar_attrs;};var _option = _obj.create_select_option(op_prm);top._cache.inputs_options[cache_type].content[cache_row_id].push(_option);}});},z : ''}; var _ih_courses = { create_cache_options : function(e,_obj){ var ar_dm = top._dm.ar_courses ?? [];var module_pk = e.module_pk;var cache_type = e.cache_type;$.each(ar_dm,function(i,course){var ar_id = course.ar_id;var lv_id = course.lv_id;var found = false;var cache_row_id = '';var ar_search = []; if(cache_type == 'courses-from-area-and-level'){ar_search  = [ar_id + '-' + lv_id,ar_id + '-' + '[all]','[all]' + '-' + lv_id,'[all]' + '-' + '[all]'];}else if(cache_type == 'courses-from-area'){ar_search  = [ar_id,'[all]'];}else if(cache_type == 'courses-from-level'){ar_search  = [lv_id,'[all]'];};$.each(ar_search,function(i,s){if(e.ar_sel_ids_nc.indexOf(s) != -1){cache_row_id = s;found = true;}});if(found == true){var op_prm = {record : course,op_caption : e.caption,op_value : e.value}; if(typeof(e.ar_attrs) != 'undefined'){op_prm.ar_attrs = e.ar_attrs;};var _option = _obj.create_select_option(op_prm);top._cache.inputs_options[cache_type].content[cache_row_id].push(_option);}});},z : ''}; var _inputs_handler = { reload_options : function(e){ var _obj = this;var _c = top._cache.inputs_options;var error = false;var cache_type = e.cache_type;var module_pk = e.module_pk;var ar_module_pk = module_pk.indexOf('-') != -1 ? module_pk.split('-') : [module_pk];if(typeof(e.include_attrs) != 'undefined' && e.include_attrs.trim() != ''){e.ar_attrs = e.include_attrs.split(',');};e.use_data_models ??= true;e.all_option ??= 0;e.empty_option ??= 0;e.object_set ??= cache_type.split('-')[0]; var callback_fn = _obj.set_callback_function(e); if(typeof(e.ar_sel_ids) != 'object'){e.ar_sel_ids = [e.ar_sel_ids];};  if(typeof(_c[cache_type]) == 'undefined'){_c[cache_type] = {content: {},object_set : e.object_set};};e.ar_sel_ids_nc = _obj.get_non_cached_ids(e);  if(e.ar_sel_ids_nc.length > 0 &&e.use_data_models == true){_obj.set_options_from_data_models(e); $.each(_c[cache_type].content,function(cache_row_id,ar_opt){var index = e.ar_sel_ids_nc.indexOf(cache_row_id);if(index != -1 && _c[cache_type].content[cache_row_id].length > 0){e.ar_sel_ids_nc.splice(index);}});}; _obj.set_options(e); if(e.ar_sel_ids_nc.length > 0){_obj.set_options_from_ajax_request(e);}}, deselect_values_when_value_all_selected : function(_select) {let sel_vals = _select.val() ?? [];let _fst = _select.closest('.fstElement');let _ar_o = _select.find('option');if (sel_vals.includes('[all]') && sel_vals.length > 1) {_select.fastselect('destroy');_select.val([]).trigger('change');_select.val(['[all]']);_select.fastselect();return;}}, set_callback_function : function(e){ var callback_fn = window[e.callback_function] ?? '';return callback_fn;}, get_non_cached_ids : function(e){ var _obj = this;var _c = top._cache.inputs_options;var ar_sel_ids = e.ar_sel_ids;var cache_type = e.cache_type;var ar_sel_ids_nc = [];  if(typeof(ar_sel_ids) != 'undefined' && ar_sel_ids !== null && ar_sel_ids.length > 0){$.each(ar_sel_ids,function(i,id){if(typeof(_c[cache_type].content[id]) == 'undefined' || _c[cache_type].content[id].length == 0){_c[cache_type].content[id] = [];ar_sel_ids_nc.push(id);}});};return ar_sel_ids_nc;}, get_cached_ids : function(e){var _obj = this;var _c = top._cache.inputs_options;var ar_sel_ids = e.ar_sel_ids;var cache_type = e.cache_type;var ar_sel_ids_c = [];  $.each(ar_sel_ids,function(i,cache_row_id){if(typeof(_c[cache_type].content[cache_row_id]) != 'undefined'){ar_sel_ids_c.push(cache_row_id);}});return ar_sel_ids_c;}, set_options_from_data_models : function(e){var _obj = this;var _c = top._cache.inputs_options;var cache_type = e.cache_type;var ar_dm = [];if(['gxl-from-level','gxl-from-level-and-at','gxl-from-level-and-branch','gxl-from-level-branch-and-at'].indexOf(cache_type) != -1 ){_ih_gxl.create_cache_options(e,_obj);}else if(['courses-from-area-and-level','courses-from-area','courses-from-level'].indexOf(cache_type) != -1){_ih_courses.create_cache_options(e,_obj);}else if(['gxc-from-area-and-level','gxc-from-level'].indexOf(cache_type) != -1){_ih_gxc.create_cache_options(e,_obj);}; }, set_options_from_ajax_request : function(e){ var _obj = this;var _c = top._cache.inputs_options;var cache_type = e.cache_type;e[e.module_pk] = e.ar_sel_ids_nc.join(','); var data = {}; $.each(e,function(i,v){   var tp = typeof(v);if(tp != 'object'){data[i] = v;}});console.log('data: ',data);if(1==1){var url = (typeof(e.url) != 'undefined') ? e.url : top._app.root + 'control/actions.php';$.ajax({data: data,url: url,cache: false,method: 'post',dataType: "json"}).done(function( res ) { console.log('res: ',res);if(typeof(res.ar_options) != 'undefined'){$.each(res.ar_options,function(cache_row_id,ar){_c[cache_type].content[cache_row_id] = Object.values(ar);});}; console.log('_c: ',_c); _obj.set_options(e);if (typeof callback_fn === "function"){callback_fn.apply(null, [e]);}});}}, create_select_option : function(e){var _obj = this;var _c = top._cache.inputs_options;var r = e.record;var op_caption = e.op_caption;var op_value = e.op_value;var ar_caption_at = op_caption.match(/@\w+/g);var ar_value_at = op_value.match(/@\w+/g);var _option = {text : op_caption,value : op_value};$.each(ar_caption_at,function(i2,rep){var attr_name = rep.replace('@','');if(typeof(r[attr_name]) != 'undefined'){_option.text = _option.text.replace(rep,r[attr_name]);}else{_option.text = _option.text.replace(rep,'');}});$.each(ar_value_at,function(i2,rep){var attr_name = rep.replace('@','');if(typeof(r[attr_name]) != 'undefined'){_option.value = _option.value.replace(rep,r[attr_name]);}else{_option.value = _option.value.replace(rep,'');}});if(typeof(e.ar_attrs) != 'undefined'){$.each(e.ar_attrs,function(k2,attr_name){if(typeof(r[attr_name]) != 'undefined'){_option[attr_name] = r[attr_name];}});};return _option;}, sort_cache_type_options : function(e){var _obj = this;var _c = top._cache.inputs_options;var cache_type = e.cache_type;$.each(_c[cache_type].content,function(id,ar_x_id){if(typeof(ar_x_id) != 'undefined'){_c[cache_type].content[id] = _obj.sort_options({ar_options : _c[cache_type].content[id],sort_by : e.sort_by});}});}, sort_options : function(e){var _obj = this;var ar = e.ar_options; var sort_by = e.sort_by ?? 'text-asc';var ar_sort_0  = sort_by.indexOf(',') != -1 ? sort_by.split(',') : [sort_by];var ar_sort = [];$.each(ar_sort_0,function(i,field){var ar1  = field.indexOf('-') != -1 ? field.split('-') : [field];var prop = ar1[0];var order = ar1[1] ?? 'asc';var cast = ar1[2] ?? (prop == 'value' ? 'int' : 'string');ar_sort.push({prop : prop,order : order,cast : cast});});ar.sort(function(a,b){var r = 0;var ar_s = ar_sort.clone();var k = 0;while(k < ar_s.length && r == 0){var sb = ar_s[k];k++;if(sb.cast == 'string'){var a_prop = a[sb.prop];var b_prop = b[sb.prop];}else if(sb.cast == 'int'){var a_prop = parseInt(a[sb.prop]);var b_prop = parseInt(b[sb.prop]);};if(sb.order == 'asc'){if(a_prop > b_prop){r = 1;}else if(a_prop < b_prop){r = -1;};}else if(sb.order == 'desc'){if(a_prop > b_prop){r = -1;}else if(a_prop < b_prop){r = 1;}}};return r;});return ar;}, get_common_div : function(e){var _p = null;var _ci = e.changing_input; if(_ci.closest('form').length > 0){_p = _ci.closest('form');}else if(_ci.closest('.filters_container').length > 0){_p = _ci.closest('.filters_container');}else if(_ci.closest('.div_form_inputs_column').length > 0){_p = _ci.closest('.div_form_inputs_column');}else if(_ci.closest('.parameter_groups_content').length > 0){_p = _ci.closest('.parameter_groups_content');}else if(_ci.closest('div[id^=div_tab_]').length > 0){_p = _ci.closest('div[id^=div_tab_]');}else if(_ci.closest('.dfi_content').length > 0){_p = _ci.closest('.dfi_content');}else if(_ci.closest('.form_object_table').length > 0){_p = _ci.closest('.form_object_table');}else if(_ci.closest('.tdyn_tr_details').length > 0){_p = _ci.closest('.tdyn_tr_details');};return _p;}, set_options : function(e){var _obj = this;var _c = top._cache.inputs_options;var _ci = e.changing_input;var error = false;var cache_type = e.cache_type;var _p = _obj.get_common_div(e);if(_p.length == 0){error = true;console.error('Parent of changing and target inputs was not identified');};if(error == false){var _target_input= _p.find(e.target_input);var include_attrs = false;if(typeof(e.ar_attrs) != 'undefined'){include_attrs = true;}; _obj.sort_cache_type_options(e);};if(error == false && _target_input.length > 0){var ar_options = [];var ar_included_values  = [];_target_input.html('');if(e.all_option == 1){ar_options.push("<option value='[all]'>" + top._tx.g('common.all') + "</option>");};if(e.empty_option == 1){ar_options.push("<option value=''></option>");};$.each(_c[cache_type].content,function(cache_row_id,ar){if(e.ar_sel_ids !== null && e.ar_sel_ids.indexOf(cache_row_id) != -1){$.each(ar,function(k,opt){var selected = '';var str_attrs = '';if(include_attrs == true){$.each(e.ar_attrs,function(k3,attr_name){if(typeof(opt[attr_name]) != 'undefined'){str_attrs += " " + attr_name + "='"+opt[attr_name]+"'";}});};var text = (typeof(opt.text) != 'undefined') ? opt.text : opt.caption;var opt_html = "<option "+selected+" "+str_attrs+" value='"+opt.value+"'>"+text+"</option>";if(ar_included_values.indexOf(opt.value) == -1&&ar_options.indexOf(opt_html) == -1){ar_included_values.push(opt.value);ar_options.push(opt_html);}});}});_target_input.html(ar_options.join(''));}},z : ''}; var _inputs_handler_dm = { init_select_options  : function(e){ var _obj = this;var selector = e?.selector ?? 'select.options_must_be_loaded[options_prm]';$(selector).each(function(){let _input = $(this);let ar_options = [];let ar_op_html = []; let jop = _input.attr('options_prm');let prm  = JSON.parse(jop);let options_set  = prm.set;let op_caption  = prm.op_caption ?? "@name";let op_value  = prm.op_value ?? "@ar_id";let all_option  = prm.all_option ?? false;let empty_option  = prm.empty_option ?? false;let include_attrs  = prm.include_attrs ?? '';let sort_by  = prm.sort_by ?? 'text-asc';let ar_attrs = include_attrs.split(',');let where  = prm.where ?? null;let value  = prm.value ?? ''; let ar_sel_ids = null;if(typeof(value) == 'string'){ar_sel_ids = value.split(',') ?? [];}else if(typeof(value) == 'object'){ar_sel_ids = value ?? [];}; let op_prm = {op_caption : op_caption,op_value : op_value};if(typeof(ar_attrs) != 'undefined'){op_prm.ar_attrs = ar_attrs;}; _input.removeClass('options_must_be_loaded');_input.addClass('options_were_dynamically_loaded');_input.attr('bind_source',prm.source);_input.attr('bind_source_set',prm.set); let dm_array = null;if(options_set == 'dm.ar_areas'){dm_array = top._dm.ar_areas ?? null;}else if(options_set == 'dm.ar_et'){dm_array = top._dm.ar_et ?? null;}else if(options_set == 'dm.ar_levels'){dm_array = top._dm.ar_levels ?? null;}else if(options_set == 'dm.ar_courses'){dm_array = top._dm.ar_courses ?? null;}; if(dm_array != null){$.each(dm_array,function(i,r){let include = true;op_prm.record = r;try{if(typeof(where) === 'string' && where != null && trim(where) != ''){eval("include = " + prm.where);};}catch(e){include=true;};if(include == true){var _option = _inputs_handler.create_select_option(op_prm);ar_options.push(_option);}});}; ar_options = _inputs_handler.sort_options({ar_options : ar_options,sort_by : sort_by}); if(all_option == true){ar_options = ar_options.prepend({text : top._tx.g('common.all'),value : "[all]" });}; if(empty_option == true){ar_options = ar_options.prepend({text : '',value : '' });}; $.each(ar_options,function(k,opt){var selected = '';var str_attrs = '';if(ar_attrs != null){$.each(ar_attrs,function(k3,attr_name){if(typeof(opt[attr_name]) != 'undefined'){str_attrs += " " + attr_name + "='"+opt[attr_name]+"'";}});};if(typeof(ar_sel_ids) != 'undefined' && ar_sel_ids !== null && ar_sel_ids.length > 0){if(ar_sel_ids.indexOf(opt.value) != -1){selected = 'selected';};};var text = (typeof(opt.text) != 'undefined') ? opt.text : opt.caption;var opt_html = "<option "+selected+" "+str_attrs+" value='"+opt.value+"'>"+text+"</option>";if(ar_op_html.indexOf(opt_html) == -1){ar_op_html.push(opt_html);}});_input.html(ar_op_html.join('')); if(_input.is('[multiple]')){_input.fastselect();}; if(typeof(prm.callback) != 'undefined' && prm.callback.length < 50){eval(prm.callback);}}); _obj.recursivelly_init_select_options(e);}, recursivelly_init_select_options : function(e){$("iframe").each(function() {var _f = $(this);var fid  = _f.attr('id');if(['content_iframe','request_iframe','request_iframe2','social-panel-container-iframe'].indexOf(fid) == -1){var _frame = _f[0].window || _f[0].contentWindow; if(typeof(_frame?.$) != 'undefined'){_frame?._inputs_handler_dm?.init_select_options(e);}}});}, reset_select_options : function(e){ var _obj = this;var selector = e?.selector ?? 'select.options_were_dynamically_loaded[options_prm]';  $(selector).each(function(){var _x = $(this);if(_x.is('[multiple]')){try{var _fsi = _x.fastselect().data('fastselect');_fsi.destroy();}catch(e){console.log(_x.attr('id') + ' is not a fastselect instance');}; }}); $(selector).each(function(){var _s = $(this);  var prm  = JSON.parse(_s.attr('options_prm')); prm.value  = _s.val();_s.attr('options_prm',JSON.stringify(prm)); _s.removeClass('options_were_dynamically_loaded');_s.addClass('options_must_be_loaded');_s.html(''); }); _obj.recursivelly_reset_select_options(e);}, recursivelly_reset_select_options : function(e){$("iframe").each(function() {var _f = $(this);var fid  = _f.attr('id');if(['content_iframe','request_iframe','request_iframe2','social-panel-container-iframe'].indexOf(fid) == -1){var _frame = _f[0].window || _f[0].contentWindow; if(typeof(_frame?.$) != 'undefined'){_frame?._inputs_handler_dm?.reset_select_options(e);}}});},z : ''};var frame_inputs;var form_inputs;var input_points; var ar_action_buttons = [];var interval_selection_of_columns_to_show = null;function vcheck(inp,fn,fi,ff){if(ff == null)ff = 'window.document';if(fn == null)fn = 'form_module_list';if(fi == null)fi= 'str_records';elem = 'check_' + inp;box = eval(ff + "." + fn + "." + elem);ob_id = box.id + ",";fi2 = eval(ff + '.' + fn + '.' + fi + '.value');c = fi2;if(box.checked == true && c.indexOf(ob_id)== -1) c += ob_id;else c = c.replace(ob_id,'');eval(ff + '.' + fn + '.' + fi + '.value = c;');};function vcheck2(chkbox,inp,fn,fi,ff){if(ff == null)ff = 'window.document';if(fn == null)fn = 'form_module_list';if(fi == null)fi= 'str_records';elem = 'check_' + inp;ob_id = elem + ",";fi2 = eval(ff + '.' + fn + '.' + fi + '.value');c = fi2;var td = $('#check_'+inp).parent();if(chkbox.checked == true){c += (c.indexOf(ob_id)== -1) ? ob_id : '';td.addClass('tdyn_td_checkbox_checked');td.parent().addClass('tdyn_tr_checked');}else{c = c.replace(ob_id,'');td.removeClass('tdyn_td_checkbox_checked');td.parent().removeClass('tdyn_tr_checked');};eval(ff + '.' + fn + '.' + fi + '.value = c;');};function vradio(inp,fn,selected_elem,value){ff= 'document';if(fn == null)fn = 'form_module_list';eval(ff + "." + fn + "." + inp + ".value = '" + value + "';");eval(ff + "." + fn + "." + selected_elem + ".checked = true;");eval(ff + "." + fn + ".points.value = '" + value + "';");};function vradio2(inp,fn){if(typeof(fn)=='undefined'){fn = 'form_module_list';};document.forms[fn].elements['str_records'].value = inp.value;};function vlt(e,l){c = e.value;if(c.length >= l){c = c.substr(0,(l - 1));};e.value = c;}; function delete_sel_option(as,v){var i;for(i=0;i<as.length;i++){if(as.options[i].value == v){as.options[i] = null;}}};function delete_input(form_id,inp){var parent = document.forms[form_id];var elem_to_be_deleted = parent.elements[inp]; parent.removeChild(elem_to_be_deleted);};function nwDeleteRowsTabDyn(script,cr){nwProcessRecords(null,script,'form_module_list',cr,'delete_batch');};function nwDuplicateRowsTabDyn(script,cr){nwProcessRecords(null,script,'form_module_list',cr,'duplicate_batch');};function delete_batch(script,cr){nwProcessRecords(null,script,'form_module_list',cr);}; function nwDeleteRecords(button,script,form_id,tcr,action){return nwProcessRecords(button,script,form_id,tcr,'delete_batch');};function nwProcessRecords(button,script,form_id,tcr,action){var i, j, form, chkd, dom_prefix, span_prefix, nrap, ar_r, cr, ar_form_inputs, action;if(typeof(action) == 'undefined'){if(button != null && typeof( $('#'+button.id).attr('action') ) != 'undefined'){action = $('#'+button.id).attr('action'); }else if(get_param_value('action',script) != 'undefined'){action = get_param_value('action',script);}else{action = 'delete_batch';};};acap = action.replace('_batch','');if((typeof(form_id) == 'undefined' || form_id == '') && button != null){form_id = button.form.id;};form = document.getElementById(form_id);dom_prefix = $("#"+ form_id +" input:hidden[id='dom_prefix']").val();ar_r = new Array();if(typeof(tcr) == 'undefined' || tcr == ''){chkd = $("#"+ form_id +" input:checked");$.each(chkd, function(current){ar_r[current] = chkd[current].value;});}else{ar_r = tcr.split(',');};$.each(ar_r, function(current){ar_r[current] = ar_r[current].replace('check_','');});if(ar_r.length == 0){ui_alert(top._tx.common.wa_you_have_not_selected_any_record);}else{nrap = ''; ar_n = new Array();for(i=0;i<ar_r.length;i++){span_prefix = null;if(ar_r[i] != ''){ar_r[i] = ar_r[i].replace(dom_prefix,'');var ari = ar_r[i];if($("#"+form_id+" #"+dom_prefix+ari+" .row_label").length > 0){ar_n[i] = ari + ' ' + $("#"+form_id+" #"+dom_prefix+ari+" .row_label").html();}else if($("#span_name_"+ari).length > 0){ar_n[i] = ari + ' ' + $("#span_name_" + ari).html();}else if($("#span_full_name_"+ari).length > 0){ar_n[i] = ari + ' ' + $("#span_full_name_" + ari).html();}else if($("#span_title_"+ari).length > 0){ar_n[i] = ari + ' ' + $("#span_title_" + ari).html();}else if($("#span_first_name_"+ari).length > 0 && $("#span_last_name_"+ari).length > 0){ar_n[i] = ari + ' ' + $("#span_first_name_" + ari).html() + ' ' + $("#span_last_name_" + ari).html();}else if($("tr[row_id='"+ari+"'] .name").length > 0){ar_n[i] = ari + ' ' + $("tr[row_id='"+ari+"'] .name").html();}else if($("tr[row_id='"+ari+"'] .title").length > 0){ar_n[i] = ari + ' ' + $("tr[row_id='"+ari+"'] .title").html();}else{ar_n[i] = ari;}}};nrap = "<div class='w100 scrolling_area' style='max-height:200px!important;min-height:50px;'>" + ar_n.join('<br/>') + "</div>";eval("var tx_action = typeof(top._tx.common."+acap+") != 'undefined'?top._tx.common."+acap+":'"+acap+" no text '");ui_alert({title : top._tx.common.are_you_sure,content : top._tx.common.are_you_sure_you_want + ' <b>' + tx_action + '</b> ' + top._tx.common.these_records + ':<br/><br/>' + nrap ,buttons : {accept : {text  : top._tx.common.accept,action : function () {cr = ar_r.join(',');ar_form_inputs = new Array();for(j=0; j<form.elements.length; j++){ar_form_inputs[j] = new Array(form.elements[j].id,form.elements[j].value);};$.ajax({url:script,data:{action : action,str_records : cr,parent_div : '#' + form_id,parameters: ar_form_inputs},success:function(raj){var search1 = new RegExp("\<script\>",'g');var search2 = new RegExp("\<\/script\>",'g');raj= raj.replace(search1,"");raj= raj.replace(search2,"");if(typeof(top._app.debug.active)!='undefined' && top._app.debug.active == true){top.ui_alert(raj);};eval(raj);},type:"POST"});}},cancel : {text  : top._tx.common.cancel,action : function () {return true;}},z : null}});};return false;};function nwHideTr(tr_id,parent_div){parent_div ??= '';try{$(parent_div + ' #' + tr_id).fadeOut(1000, function(){$(parent_div + ' #' + tr_id).remove();});}catch(e){parent.$(parent_div + ' #' + tr_id).fadeOut(1000, function(){parent.$(parent_div + ' #' + tr_id).remove();});};};function verify_next_input(input,ssn){ssn = 'span_' + ssn;if(input.value == ''){document.getElementById(ssn).style.display = 'none';}else if(ssn != ''){toggle2(ssn,1,'table-cell');};};function validate_email(email){var reg = /^[[A-Za-z0-9!#$%&'*+/=?^_`{|};~-]+(?:\.[[A-Za-z0-9!#$%&'*+/=?^_`{|};~-]+)*@(?:[[A-Za-z0-9](?:[[A-Za-z0-9-]*[[A-Za-z0-9])?\.)+[[A-Za-z0-9](?:[[A-Za-z0-9-]*[[A-Za-z0-9])?$/;if(reg.test(email.value) == false){str_error_msg = top._tx.common.email_example;ui_alert({msg : top._tx.common.er_not_comply_with_the_format + ', ' + str_error_msg,type: 'error'});return false;};return true;};function validate_phone(phone){var reg = /^([0-9])+$/;var phone_input = $('#'+phone.id);var phone_value = phone_input.val();if(reg.test(phone_value) == false){str_error_msg = top._tx.common.only_numbers;ui_alert({msg : top._tx.common.er_not_comply_with_the_format + ', ' + str_error_msg,type: 'error'});return false;};return true;};function verify_before_send(e){var action = (typeof(e.action) != 'undefined')? e.action : 'add';if (e.button instanceof jQuery){var button = e.button;var form = e.button.closest('form');var form_id = form.attr('id');}else{var form_id = (typeof(e.form_id) != 'undefined')? e.form_id : e.button.form.id;var form = $('#'+form_id);var button = form.find('input[type=button][id='+e.button.id+']');};var object_type = null;if(typeof(e.object_type)!='undefined'){object_type = e.object_type;}else if(form.find('input[name=object_type]').length > 0){object_type = form.find('input[name=object_type]').val();};if(typeof(object_type) != 'undefined' && object_type != '' && object_type != null){eval("if(typeof(ar_fields_to_check_"+object_type+")!=='undefined'){var cav = ar_fields_to_check_"+object_type+"[action];}else if(typeof(ar_fields_to_check)!=='undefined'){var cav = ar_fields_to_check[action];}else{var cav = new Array();};");if(typeof(cav)=='undefined'){var cav = new Array();};}else{var cav = ar_fields_to_check[action];};if(typeof(cav) == 'undefined' && top._ses.user.role_id <= 20){ui_alert({msg : top._tx.common.er_object_type_not_defined,type: 'purple'});};var field;var cp;res = true;str_error_msg = "";for(i=0; i < cav.length; i++){var field = cav[i];  var the_field = null;  var value = '';the_field = find_field_in_form({form:form,field:field});if(the_field !== null){value = the_field.val();if(typeof(value) == 'undefined' || value === ''){var caption = '';if(form.find('.label#td_'+field).length > 0){caption = form.find('.label#td_'+field).html();}else if(form.find('.one_input[name='+field+'] .label').length > 0){caption = form.find('.one_input[name='+field+'] .label').html();};caption = caption.replace('<br>','').replace('<br />','').replace('Â´','').replace(',','');str_error_msg += " + '\\n' + '" + caption + "' " ;res = false;error = true;}}};if(res == false){str_error_msg = " + \"<div class='w100 scrolling_area' style='max-height:200px!important;min-height:50px;'>\" " + str_error_msg + " + \"</div>\" ";eval("top.ui_alert({text:top._tx.common.please_complete_the_information " + str_error_msg + ",type:'error'});");}else{var everything_ok = true;if(typeof(window['verify_before_send__'+object_type]) != 'undefined'){eval ("everything_ok = verify_before_send__"+object_type+"({form_id:'"+form_id+"',button:button,action:'"+action+"'});"); }else if(typeof(window['verify_before_send__'+object_type+'_'+action])!='undefined'){eval ("everything_ok = verify_before_send__"+object_type+'_'+action+"({form_id:'"+form_id+"',button:button,action:'"+action+"'});"); };};return everything_ok;};function find_field_in_form(e){var form = e.form;var the_field = null;  if(form.find('#' + e.field).length > 0){the_field = form.find('#' + e.field);}else if(form.find('input[name=' + e.field + ']').length > 0){the_field = form.find('input[name=' + e.field + ']');}else if(form.find('select[name=' + e.field + ']').length > 0){the_field = form.find('select[name=' + e.field + ']');}else if(form.find('textarea[name=' + e.field + ']').length > 0){the_field = form.find('textarea[name=' + e.field + ']');};return the_field;};function send_form(e){if (e.button instanceof jQuery){var button = e.button;var form = e.button.closest('form');var form_id = form.attr('id');}else{var form_id = (typeof(e.form_id) != 'undefined')? e.form_id : e.button.form.id;var form = $('#'+form_id);var button = form.find('input[type=button][id='+e.button.id+']');};var button_id = button.attr('id');var ab_id = form_id + '.' + button_id;window.document.forms[form_id].submit();button.prop('disabled',true);if(typeof(ar_action_buttons[ab_id]) == 'undefined'){ar_action_buttons[ab_id] = new action_button({button_id : button_id,form_id : form_id});};ar_action_buttons[ab_id].processing();ar_action_buttons[ab_id].int_force_react = setTimeout(function(){ar_action_buttons[ab_id].force_reactivation();},top._app.timers.execution.max_waiting_time);};function update_cf_fields_x_record(button){form_id = button.form.id;$("#"+form_id+' .input_cf_field').first().trigger('change');$("#"+form_id+' .input_cf_field').first().trigger('keypress');var a = $("#"+form_id+" input:not([name^='pxr_id_']), #"+form_id+" select:not([name^='pxr_id_'])");var error = false;var ar_cno = new Array();var i = 1;a.css('border','');$.each(a, function(index,current_input){var input_name = $(this).attr('name');var required = $(this).attr('is_required');var current_val= null;var input = $(this);if(!input.is('input[type=hidden]')){current_val = input.val();if(($.trim(current_val) === '' || current_val == 'undefined') && required == 1){error= true;label_id = input_name.replace('pxt_','label_');label = '* ' + $("#"+form_id+" div[id="+label_id+"]").html();ar_cno[i] = label;$("#"+form_id+" input[name="+input_name+"]").css('border','1px solid #e97d6d');i++;}}});if(error==true || ar_cno.length > 0){top.ui_alert(top._tx.common.these_fields_must_have_a_value + ': \n\n' + ar_cno.join('\n'));};if(error == false){window.document.forms[form_id].submit();};return !error;};$('.input_yes_and_no').live('click',function(){img = $(this).find('img');input = $(this).find('input[type=hidden]');src = img.attr('src');new_src = '';error = false;if($(this).attr('disabled') == 'true' || $(this).attr('disabled') == 'disabled' || $(this).prop('disabled') == true){error = true;};if(error == false){if(src.indexOf('switch_off') != -1){new_src = top._app.images.url + '/icons/general/switch_on.png';img.attr('src', new_src);input.val(1);}else{new_src = top._app.images.url + '/icons/general/switch_off.png';img.attr('src', new_src);input.val(0);};input.trigger('change');}});var _input_yes_and_no = {set_default : function(e){var div = $(e.selector);var value = div.attr('default');this.change({trigger : false,selector : e.selector,value : parseInt(value)});},change : function(e){var img = $(e.selector).find('img');var input = $(e.selector).find('input[type=hidden]');var new_src = top._app.images.url + '/icons/general/';var trigger = (typeof(e.trigger) == 'undefined' || e.trigger == true) ? true : false; e.value = (trigger == true) ? Math.abs(parseInt(e.value) - 1) : e.value;if(parseInt(e.value) == 1){new_src += 'switch_on.png';}else{new_src += 'switch_off.png';};input.val(e.value);img.attr('src', new_src); if(trigger == true){$(e.selector).trigger('click');}},set_img_from_value : function(e){var img = $(e.selector).find('img');var input = $(e.selector).find('input[type=hidden]');var new_src = top._app.images.url + '/icons/general/';if(input.val() == '1'){new_src += 'switch_on.png';}else{new_src += 'switch_off.png';};img.attr('src', new_src);},z : ''};function action_button(e){var _obj = this;_obj.form_id = (typeof(e.form_id) != 'undefined') ? e.form_id : null;_obj.form_selector = (typeof(e.form_selector) != 'undefined') ? e.form_selector : null;_obj.btn_id = (typeof(e.button_id) != 'undefined') ? e.button_id : null;_obj.btn_name = (typeof(e.button_name) != 'undefined') ? e.button_name : null;_obj.set_dom();_obj.tag_type  = (_obj.dom._button.is('[type]') && _obj.dom._button.attr('type') == 'button') ? 'input' : 'button';_obj.caption = _obj.tag_type == 'input' ? _obj.dom._button.attr('value') : _obj.dom._button.html();_obj.interval = null;_obj.proc_text = top._tx.common.processing + '...';_obj.int_force_react= null;};action_button.prototype.set_dom = function(){var _obj = this;var _f = null;var _b = null;if(_obj.form_id != null && $('#' + _obj.form_id).length > 0){_f = $('#' + _obj.form_id);}else if(_obj.form_selector != null && $(_obj.form_selector).length > 0){_f = $(_obj.form_selector);}else if(_obj.btn_id != null && $('#' + _obj.btn_id).closest('form').length > 0){_f = $('#' + _obj.btn_id).closest('form');}else if(_obj.btn_id != null && $('[name=' + _obj.btn_id + ']').closest('form').length > 0){_f = $('[name=' + _obj.btn_id + ']').closest('form');_obj.form_id = _f.attr('id');}else if(_obj.btn_name != null && $('[name=' + _obj.btn_name + ']').closest('form').length > 0){_f = $('[name=' + _obj.btn_name + ']').closest('form');_obj.form_id = _f.attr('id');};if(_f != null){if(_obj.btn_id != null){if(_f.find('#' + _obj.btn_id).length > 0){_b = _f.find('#' + _obj.btn_id);}else if(_f.find('[name=' + _obj.btn_id + ']').length > 0){_b = _f.find('[name=' + _obj.btn_id + ']');};}else if(_obj.btn_name != null && _f.find('[name=' + _obj.btn_name + ']').length > 0){_b = _f.find('[name=' + _obj.btn_name + ']');};};_obj.dom = {_form : _f,_button : _b}; }; action_button.prototype.processing = function(e){var _obj = this;var error = false;if(_obj.dom._button == null){error = true;};if(error == false){_obj.dom._button.prop('disabled', true);_obj.dom._button.addClass('disabled');if(typeof(e) == 'undefined'){var e = {cp : '', proc_text : null};};if(typeof(e.cp) == 'undefined'){e.cp = '';};};if( error == false ){var t = (_obj.tag_type == 'input') ? _obj.dom._button.val() : _obj.dom._button.html();time = 50;var pt = (e.proc_text !== null) ? e.proc_text : _obj.proc_text;if(t.length == pt.length - 1){time = 1000;}else if(t.length == pt.length){e.cp = '';};_obj.set_caption(e.cp);t = (_obj.tag_type == 'input') ? _obj.dom._button.val() : _obj.dom._button.html();e.cp = t + pt.charAt(t.length);_obj.interval = setTimeout(function(){_obj.processing({cp : e.cp,proc_text : pt});},time);};}; action_button.prototype.set_caption = function(cp){var _obj = this;if(_obj.tag_type == 'input'){_obj.dom._button.val(cp);}else{_obj.dom._button.html(cp);};}; action_button.prototype.reactivate = function(cp){var _obj = this;clearTimeout(_obj.interval);clearTimeout(_obj.int_force_react);_obj.interval = null;_obj.int_force_react = null;if(typeof(cp) == 'undefined' || cp == ''){cp = _obj.caption;};_obj.set_caption(cp);_obj.dom._button.prop('disabled', false);_obj.dom._button.removeClass('disabled');}; action_button.prototype.force_reactivation = function(){var _obj = this;_obj.reactivate();var tp = (typeof(msg_force_react) != 'undefined') ? msg_force_react : top._tx.common.wa_slow_action;div_msg = 'div_msg_'+_obj.form_id;if($('#' + div_msg).length > 0){set_msg(div_msg,tp,'wait');}else{top.ui_alert(tp + div_msg);};clearTimeout(_obj.interval);clearTimeout(_obj.int_force_react);_obj.interval = null;_obj.int_force_react = null;};_ab_handler = {reactivate_all_buttons : function(){if(typeof(ar_action_buttons) != 'undefined'){$.each(ar_action_buttons,function(i,b){b.force_reactivation();});};if(typeof(parent) != 'undefined' && typeof(parent.ar_action_buttons) != 'undefined'){$.each(parent.ar_action_buttons,function(i,b){b.force_reactivation();});};if(typeof(top) != 'undefined' && typeof(top.ar_action_buttons) != 'undefined'){$.each(top.ar_action_buttons,function(i,b){b.force_reactivation();});}},reactivate : function(e){if(typeof(e) == 'String'){var ab_id = e;}else{var ab_id = e.ab_id;};$.each(ar_action_buttons,function(i,b){if(b.ab_id == ab_id){b.force_reactivation();}});},z : ''}; $('.secondary_menu').live('click mouseleave',function(){$('.secondary_menu').hide();}); $('.user_profile_button').live('click',function(){var menu = $('.user_profile_menu');if(menu.is(':visible')){menu.fadeOut();}else{$('.secondary_menu').hide();menu.fadeIn();}}); $('.at_picker_button').live('click',function(){var menu = $('.at_picker_menu');if(menu.is(':visible')){menu.fadeOut();}else{$('.secondary_menu').hide();menu.fadeIn();}});$('.secondary_menu').live('click mouseleave',function(){$('.secondary_menu').hide();$('.dropdown-content').fadeOut(1000);});$('.n_news').live('mouseover', function(){$('.dropdown-content').fadeIn(1000);});$('.at_picker_menu > div').live('click',function(){var at_id = $(this).attr('at_id');var e_id = $(this).attr('e_id');var at_name = $(this).attr('at_name');top._current_interface.change_academic_term({at_id:at_id,e_id:e_id});top._dmh.are_data_models_loaded();$('.at_picker_button span').html(at_name);$('.at_picker_button').attr('title',at_name);$('.at_picker_menu > div').removeClass('at_picker_current');$(this).addClass('at_picker_current');}); $('.student_picker_button').live('click',function(){var menu = $('.student_picker_menu');if(menu.is(':visible')){menu.fadeOut();student_picker.round_corners();}else{$('.secondary_menu').hide();menu.fadeIn();student_picker.square_corners();}});$('.student_picker_menu > div').live('click',function(){var u_id = $(this).attr('u_id');var e_id = $(this).attr('e_id');var student_label = $(this).find('.student_label').html();var student_image = $(this).find('.student_image').html();top._guardian.change_current_student({u_id:u_id,e_id:e_id}); $('.student_picker_button .student_label').html(student_label);$('.student_picker_button .student_image').html(student_image);$('.student_picker_menu > div').removeClass('student_picker_current');$(this).addClass('student_picker_current');});$('.student_picker_menu').live('mouseenter',function(){student_picker.square_corners();});$('.student_picker_menu').live('mouseleave',function(){student_picker.round_corners();});$(".zoom .btn_zoom").live('click',function() {let delta = $(this).attr('type') == 'in' ? 0.1 : -0.1;_zoom_handler.zoom({delta : delta});});var _zoom_handler = {timeout : null,set_default_zoom : function(){ let iw = window.innerWidth;let ow = window.outerWidth;let zl = 100; let browser_zoom = Math.round((ow / iw) * 100);if(browser_zoom >= 90 || browser_zoom <= 110){if (iw <= 1024){zl = 1;}else if (iw <= 1300){zl = 1.1;}else if (iw <= 1650){zl = 1.2;}else if (iw < 1900){zl = 1.3;}else if (iw >= 1900){zl = 1.3;};try{var _zl = top.$('.zoom .zoom_level');if (_zl && _zl.length > 0) {_zl.attr('current', zl);};}catch(er){console.error(er);};this.zoom({current : zl});}else{ let foo = 1;}},zoom : function(e){let _obj= this;let error = false;let delta = e?.delta ?? null;let current = e?.current ?? null;let _zl = null;let level = 1;let zl = 100;if(!delta || delta === null || delta == NaN){delta = 0;};try{_zl = top.$('.zoom .zoom_level');if(_zl.length > 0 && current == null){current = parseFloat(_zl.attr('current'));};}catch(er){};if(!current || current === null || current == NaN){current = 1;};delta = parseFloat(delta);current = parseFloat(current);level = current + delta;level = Math.min(1.8, Math.max(0.8, level)); level = Math.round(level * 10) / 10;top._app.zoom = {level : level};zl = parseInt(level * 100).toString();clearTimeout(_obj.timeout);_obj.timeout = null;if(error == false){if(_zl && _zl.length > 0){_zl.attr('current',level);_zl.html(zl + '%');}else{if(zl != 100){this.timeout = setTimeout(function(){_obj.zoom(e);},200);};};$("body").css("zoom", '' + zl + '%');$('body').removeClass(function(index, class_name) {return (class_name.match(/\bzoom_\S+/g) || []).filter(c => c !== 'zoom_' + zl).join(' ');});$("body").addClass("zoom_" + zl);}},z : ''};var student_picker = {button : $('.student_picker_button'),round_corners : function(){this.button.addClass('bottom-left-rounded');this.button.removeClass('bottom-left-squared');},square_corners : function(){this.button.removeClass('bottom-left-rounded');this.button.addClass('bottom-left-squared');},foo : ''};var text_handler = {g : function(e,ar_params=null){var _obj = this;var error = false;var text = '';var text_id = '';var param_index = 1;if(typeof(e) == 'undefined'){error = true;}else if(typeof(e) == 'string'){text_id = e;}else if(typeof(e) == 'object'){text_id = e.text_id;if(typeof(e.ar_params) != 'undefined'){ar_params = e.ar_params;};};if(typeof(ar_params) == 'undefined' || ar_params == null){var ar_params = new Array();};if(error == false){text_id = text_id.trim();if(text_id != '' && text_id.indexOf(';') != -1){  var ar_text_ids = text_id.split(';');var ar_unique_text_ids = new Array();var k = 0;$.each(ar_text_ids,function(k,v){if(v != null && v.trim() != '' && v.trim().length >= 2 && ar_unique_text_ids.includes(v) == false){ar_unique_text_ids[k] = v;k++;}});$.each(ar_unique_text_ids,function(i,v){if(typeof(v) != 'undefined' && v != null && v.trim() != ''){text += _obj.g(v) + '<br/>';}});}else if(text_id != ''){  if(text_id.indexOf(',') != -1){var i = 0;var ar_parts = text_id.split(',');text_id = ar_parts.shift();for(i = 0; i < ar_parts.length; i++){if(typeof(ar_parts[i]) != 'undefined'){ar_params[i] = ar_parts[i];}}};if($.trim(text_id) != ''){var js_code = '';js_code += "try{";js_code += "if(typeof(_obj." + text_id + ") != 'undefined'){";js_code += "text = _obj." + text_id + ";";if(typeof(current_module) != 'undefined' && current_module.trim() != ''){js_code += "}else if(typeof(_obj." + current_module + ") != 'undefined' && typeof(_obj." + current_module + '.'  + text_id + ") != 'undefined'){";js_code += "text = _obj." + current_module + '.'  + text_id + ";";};if(typeof(top.current_module) != 'undefined' && top.current_module.trim() != ''){js_code += "}else if(typeof(_obj." + top.current_module + ") != 'undefined' && typeof(_obj." + top.current_module + '.'  + text_id + ") != 'undefined'){";js_code += "text = _obj." + top.current_module + '.'  + text_id + ";";};js_code += "}else{ text = '" + text_id + "';};";js_code += "}catch(e){ text = '" + text_id + "'; console.error('text_id: -" + text_id + "- not defined'); };";eval(js_code);text = _obj.parse_params({text : text,ar_params : ar_params});};}; };return text;},parse_params : function(e){var s = e.text;var ar_prm = e.ar_params;var max = 6;var ar_wc = new Array('=|=','=?=');while(wc = ar_wc.pop()){var prm_i = 0;var counter = 0;while(s.indexOf(wc) != -1 && typeof(ar_prm[prm_i]) != 'undefined' && counter <= max){var pi = ar_prm[prm_i].toString();pi = pi.replaceAll('=|=','').replaceAll('=?=','');s = s.replace(wc, pi);prm_i = prm_i + 1;counter = counter + 1;};};  return s;},z : ''};if(typeof(_tx) == 'undefined'){_tx = text_handler;}; var _score = { get : function(c){let d = (typeof(c.d)!='undefined')?c.d : 0;let f = (typeof(c.f)!='undefined')?c.f : 'zero_to_one_hundred';let ev = (typeof(c.ev)!='undefined')?parseInt(c.ev) : 1;let r = (typeof(c.r)!='undefined')?c.r : 0;let caption = (typeof(c.caption)!='undefined')?c.caption : null;let i = 0;let v, sv;f = f.replace('grading_levels_plus_','');d = r ? d : Math.round(d);let h = d;if(f == 'zero_to_five'){if(r){h = Math.round(d * 20);}else{h = Math.round(d/2);h = h / 10;};}else if(f == 'zero_to_ten'){h = r?d*10:d/10;}else if(f == 'zero_to_one_hundred'){}else if(f == 'percentage'){if(r){h = String(h).replace('%','');}else{h += '%';};}else if(f == 'zero_to_four'){if(r){h = Math.round(d * 25);}else{h = Math.round(d/2.5);h = h / 10;};}else if(f == 'zero_to_seven'){if(r){h = Math.round(d * 14.285714);}else{h = Math.round(d/1.4285714);h = h / 10;};}else if(f == 'zero_to_twenty'){if(r){h = Math.round(d * 5);}else{h = Math.round(d/0.5);h = h / 10;};}else if(f == 'zero_to_fifty'){if(r){h = Math.round(d * 2);}else{h = Math.round(d/0.2);h = h / 10;};}else if(f == 'approved'){let ar = ar_glxs[ev];let sel_gl = null;if(typeof(ar_glxs[ev])!='undefined'){for(let i=0; i<ar_glxs[ev].length; i++){let gl = ar_glxs[ev][i];if(parseFloat(gl.li) <= d && parseFloat(gl.ls) >= d){sel_gl = gl;break;}}};if(sel_gl){if(sel_gl.ti == '0'){fscore = top._tx.common.abbr_approved_1;}else{fscore = top._tx.common.abbr_non_approved_1;};};}else{let ar = ar_glxs[ev];let sel_gl = null;if(typeof(ar_glxs[ev])!='undefined'){for(let i=0;i<ar_glxs[ev].length;i++){let gl = ar_glxs[ev][i];if(r){if(gl.av == h){sel_gl = gl;break;};}else{if(parseFloat(gl.li) <= d && parseFloat(gl.ls) >= d){sel_gl = gl;break;}}};if(typeof(sel_gl)!='undefined'){if(caption == '@abbreviation'){h = sel_gl.av;}else if(r){h = sel_gl.de;}else{if(f == 'symbols' || f == 'emoticons'){h = top._app.images.url + '/grading_levels/color/20/' + sel_gl.si + '.png';}else{h = sel_gl.av + ' ' + d;}}}}};return h;}, map : function(c){let d = (typeof(c.d) !='undefined')?parseFloat(c.d) : 0;  let ev = (typeof(c.ev) !='undefined')?parseInt(c.ev) : 1;  let f = c?.f ?? 'zero_to_one_hundred';  f = f.replace('grading_levels_plus_','');let r = top?.config?.scores?.rounding_mode ?? 'round';  let decimals = top?.config?.scores?.decimals ?? 1;  let v = null;let sv = null;let i = 0;let h = d;  if(f == 'zero_to_five'){if(decimals == 1){if(r == 'ceil'){h = Math.ceil(d / 2) * 2;}else if(r == 'floor'){h = Math.floor(d / 2) * 2;}else{h = Math.round(d / 2) * 2;};}else if(decimals == 2){if(r == 'ceil'){h = Math.ceil(d * 5) / 5;}else if(r == 'floor'){h = Math.floor(d * 5) / 5;}else{h = Math.round(d * 5) / 5;};}else{if(r == 'ceil'){h = Math.ceil(d / 5);}else if(r == 'floor'){h = Math.floor(d / 5);}else{h = Math.round(d / 5);};};}else if(f == 'zero_to_ten'){  if(decimals == 1){if(r == 'ceil'){h = Math.ceil(d / 1) * 1;}else if(r == 'floor'){h = Math.floor(d / 1) * 1;}else{h = Math.round(d / 1) * 1;};}else if(decimals == 2){if(r == 'ceil'){h = Math.ceil(d * 10) / 10;}else if(r == 'floor'){h = Math.floor(d * 10) / 10;}else{h = Math.round(d * 10) / 10;};}else{if(r == 'ceil'){h = Math.ceil(d / 10);}else if(r == 'floor'){h = Math.floor(d / 10);}else{h = Math.round(d / 10);};};}else if(f == 'zero_to_one_hundred' || f == 'percentage'){if(decimals == 1){if(r == 'ceil'){h = Math.ceil(d * 10) / 10;}else if(r == 'floor'){h = Math.floor(d * 10) / 10;}else{h = Math.round(d * 10) / 10;};}else{if(r == 'ceil'){h = Math.ceil(d);}else if(r == 'floor'){h = Math.floor(d);}else{h = Math.round(d);};};}else if(f == 'grading_levels' || f == 'emoticons'){ar = ar_glxs[ev];if(typeof(ar_glxs[ev])!='undefined'){for(i=0;i<ar_glxs[ev].length;i++){v = ar_glxs[ev][i];if(parseFloat(v.li) <= d && parseFloat(v.ls) >= d){h = v.de;break;}}};}else if(f=='zero_to_four'){d = parseInt(d); h = (r=='floor')?(d - d%2.5):(d + (2.5 - d%2.5));}else if(f=='zero_to_seven'){d = parseInt(d); h = (r=='floor')?(d - d%(1.4285714)):(d + ((1.4285714) - d%(1.4285714)));}else if(f == 'zero_to_fifty'){if(decimals == 0){if(r == 'ceil'){h = Math.ceil(d / 2) * 2;}else if(r == 'floor'){h = Math.floor(d / 2) * 2;}else{h = Math.round(d / 2) * 2;};}else{h = d;};};if($.isNumeric(h) && h > 100){h = 100;};return h;},get_color_by_performance : function(s){let c = '';let min_performance = 60;if(sheet_cfg?.min_performance){min_performance = sheet_cfg?.min_performance;};if($.isNumeric(min_performance)){if(s >= 90){c = '#028bae';}else if(s >= min_performance){c = '#444444';}else if($.isNumeric(s) && s !== '' && s > 0){c = '#e97d6d';}else{c = '#e6e6e6';};}else{if(s >= 90){c = '#028bae';}else if(s <= 49){c = '#e97d6d';}else{c = '#444444';};};return c;},z : ''};var _grading_levels_handler = {get : function(e){var gl_id = e.gl_id;var ar_gl = e.ar_gl;var selected_gl = null;$.each(ar_gl,function(k,gl){if(gl.id == gl_id){selected_gl = gl;}});return selected_gl;},get_grading_level_from_score : function(e){var score = parseFloat(e.score);var ar_gl = e.ar_gl;var selected_gl = null;$.each(ar_gl,function(k,gl){if(score >= parseFloat(gl.li) &&score <= parseFloat(gl.ls) ){selected_gl = gl; }});return selected_gl;},get_ar_qt_nodes_x_grading_level : function(e){var _obj = this;var ar_qt = {};var ar_nodes = e.ar_nodes;var ar_gl = e.ar_gl;ar_qt[0] = 0;$.each(ar_nodes,function(k,score){var gl = _obj.get_grading_level_from_score({score : score,ar_gl : ar_gl});if(typeof(gl) != 'undefined' && gl !== null){var gl_id = gl.id;if(typeof(ar_qt[gl_id]) == 'undefined'){ar_qt[gl_id] = 0;};ar_qt[gl_id]++;}else{ar_qt[0]++;}});return ar_qt;},z : null}; var _config = { update_var: function (e) {let v = e.variable;let val = e.value;let p = v.split('.');let obj = top.config;for (let i = 0; i < p.length - 1; i++) { if (typeof obj[p[i]] !== 'object' || obj[p[i]] === null) {obj[p[i]] = {};};obj = obj[p[i]];};obj[p[p.length - 1]] = val;},z: ''};if(typeof(_tx)=='undefined'){var _tx = top.text_handler;}; if(typeof(_tx.core_index)=='undefined'){_tx.core_index = {};}; if(typeof(top._tx)=='undefined'){top.eval('var _tx = top.text_handler;');}; $.each(_tx,function(k,v){if(typeof(top._tx[k]) == 'undefined'){top._tx[k] = _tx[k];}});if(typeof(_tx)=='undefined'){var _tx = top.text_handler;}; if(typeof(_tx.common)=='undefined'){_tx.common = {};};  _tx.common.abbr_approved_1 = 'A';  _tx.common.abbr_at_1 = 'PA';  _tx.common.abbr_et_1 = 'PE';  _tx.common.abbr_graded_1 = 'C';  _tx.common.abbr_influence = '%';  _tx.common.abbr_lv_id = 'Gr';  _tx.common.abbr_lvlng = 'Nivlc';  _tx.common.abbr_non_approved_1 = 'NA';  _tx.common.abbr_score = 'Calif';  _tx.common.abbr_standard = 'D';  _tx.common.abbr_weekly_load = 'I.H.';  _tx.common.abbreviation_cumulative = 'ACUM';  _tx.common.abbreviation_final = 'DEFN';  _tx.common.absences_justified = 'Faltas justificadas';  _tx.common.absences_not_justified = 'Faltas injustificadas';  _tx.common.absences = 'Faltas';  _tx.common.academic_term = 'Periodo acadÃ©mico';  _tx.common.academic_terms = 'Periodos acadÃ©micos';  _tx.common.accept_and_continue = 'Aceptar y continuar';  _tx.common.accept = 'Aceptar';  _tx.common.actions = 'Acciones';  _tx.common.activate = 'Activar';  _tx.common.add_more = 'Agregar mÃ¡s';  _tx.common.add = 'Agregar';  _tx.common.agenda = 'Agenda';  _tx.common.all = 'Todos';  _tx.common.allows_score = 'Es calificable';  _tx.common.and = 'y';  _tx.common.ar_id = 'Ãrea';  _tx.common.are_you_sure_you_want = 'EstÃ¡ seguro que desea';  _tx.common.are_you_sure = 'EstÃ¡ seguro?';  _tx.common.area_plu_cap = 'Ãreas';  _tx.common.area_plu_low = 'Ã¡reas';  _tx.common.area_plu_upp = 'ÃREAS';  _tx.common.area_sin_cap = 'Ãrea';  _tx.common.area_sin_low = 'area';  _tx.common.area_sin_upp = 'AREA';  _tx.common.area = 'Ãrea';  _tx.common.areas = 'Ãreas';  _tx.common.assignment_plu_cap = 'Actividades';  _tx.common.assignment_plu_low = 'actividades';  _tx.common.assignment_plu_upp = 'ACTIVIDADES';  _tx.common.assignment_sin_cap = 'Actividad';  _tx.common.assignment_sin_low = 'actividad';  _tx.common.assignment_sin_upp = 'ACTIVIDAD';  _tx.common.assignments = 'Actividades';  _tx.common.back = 'AtrÃ¡s';  _tx.common.c_id = 'Curso';  _tx.common.cancel = 'Cancelar';  _tx.common.certificate_does_not_exist = 'El certificado no existe';  _tx.common.changes_have_not_been_saved = 'Cambios no guardados';  _tx.common.child_assignment_plu_cap = 'Actividades hijas';  _tx.common.child_assignment_plu_low = 'actividades hijas';  _tx.common.child_assignment_plu_upp = 'ACTIVIDADES HIJAS';  _tx.common.child_assignment_sin_cap = 'Actividad hija';  _tx.common.child_assignment_sin_low = 'actividad hija';  _tx.common.child_assignment_sin_upp = 'ACTIVIDAD HIJA';  _tx.common.clone = 'Clonar';  _tx.common.close_and_no_more = 'No / Cerrar';  _tx.common.close = 'Cerrar';  _tx.common.code_must_be_entered = 'Se debe ingresar un cÃ³digo';  _tx.common.confirm = 'Confirmar';  _tx.common.contact_details = 'Detalles de contacto';  _tx.common.continue = 'Continuar';  _tx.common.correct = 'Correcto';  _tx.common.course_plu_cap = 'Cursos';  _tx.common.course_plu_low = 'cursos';  _tx.common.course_plu_upp = 'CURSOS';  _tx.common.course_sin_cap = 'Curso';  _tx.common.course_sin_low = 'curso';  _tx.common.course_sin_upp = 'CURSO';  _tx.common.date = 'Fecha';  _tx.common.deactivate = 'Desactivar';  _tx.common.define = 'Definir';  _tx.common.delete_scores = 'Borrar calificaciones de';  _tx.common.delete = 'Eliminar';  _tx.common.delivery_date = 'Fecha Entrega';  _tx.common.delivery = 'Entrega';  _tx.common.description = 'DescripciÃ³n';  _tx.common.disable = 'Deshabilitar';  _tx.common.do_not_delete = 'No eliminar';  _tx.common.do_not_reload = 'No recargar';  _tx.common.does_not_exist = 'no existe';  _tx.common.download = 'Descargar';  _tx.common.duplicate = 'Duplicar';  _tx.common.edit = 'Editar';  _tx.common.email_example = 'ejemplo@ejemplo.com';  _tx.common.enable = 'Habilitar';  _tx.common.er_access_control_handler_change_at = 'El control de acceso no pudo cambiar de periodo acadÃ©mico.';  _tx.common.er_branch_not_defined = 'La sede no ha sido definida';  _tx.common.er_data_missing = 'Te faltan los siguientes datos:\n';  _tx.common.er_does_not_meet_the_maximum_number = 'no cumple con el mÃ¡ximo de caracteres numÃ©ricos';  _tx.common.er_does_not_meet_the_minimum_number = 'no cumple con el mÃ­nimo de caracteres numÃ©ricos';  _tx.common.er_has_occurred_performing_request = 'Ha ocurrido un error al realizar la peticiÃ³n';  _tx.common.er_no_network_availability = 'El servicio de grÃ¡ficas de Google no estÃ¡ disponible';  _tx.common.er_not_comply_with_the_format = 'Este campo no cumple con el formato solicitado';  _tx.common.er_not_enough_parameters = 'No se recibieron parÃ¡metros suficientes';  _tx.common.er_not_enough_permissions = 'No tienes los permisos para realizar acciones en este mÃ³dulo. Por favor comunÃ­cate con la instituciÃ³n';  _tx.common.er_object_type_not_defined = 'DepuraciÃ³n: El parÃ¡metro object_type no fuÃ© recibido';  _tx.common.er_query_to_display_list = 'Ha ocurrido un error al obtener la consulta para mostrar esta lista.';  _tx.common.er_some_parameter_is_missing = 'Falta algÃºn parÃ¡metro';  _tx.common.er_sql_exception_caused_an_unexpected_error = 'Ha ocurrido un error inesperado de SQL.\nPor favor haga click en el mÃ³dulo de ayuda e informe de este error';  _tx.common.er_start_transaction = 'La transacciÃ³n no ha podido ser iniciada.';  _tx.common.er_when_calling_stored_procedure = 'El procedimiento no ha sido llamado. Por favor informe a soporte@nusoft.com.co de este error =?=.';  _tx.common.er_when_trying_communicating_with_server = 'Ha ocurrido un error al intentar comunicarse con el servidor.';  _tx.common.er_you_dont_have_permissions = 'No tienes los permisos necesarios para ejecutar esta acciÃ³n.';  _tx.common.er_you_must_provide_at_id = 'Se debe proveer un at_id.';  _tx.common.er_you_must_provide_e_id = 'Se debe proveer un e_id.';  _tx.common.et_report = 'Reporte';  _tx.common.ev_id = 'Escala de valoraciÃ³n';  _tx.common.exit = 'Salir';  _tx.common.explore = 'Explorar';  _tx.common.final_score_format = 'Formato de nota final';  _tx.common.final_scores = 'Resultados finales';  _tx.common.finish = 'Terminar';  _tx.common.generating = 'Generando';  _tx.common.go_to_start = 'Ir al inicio';  _tx.common.group = 'Grupo';  _tx.common.gs_id = 'Escala de valoraciÃ³n';  _tx.common.guardian = 'Acudiente';  _tx.common.gxc_id = 'Curso / Grupo';  _tx.common.has_et_report = 'Reporte';  _tx.common.health__allergies = 'Alergias';  _tx.common.health__conditions = 'Condiciones especiales';  _tx.common.health__coverage = 'Cubrimiento en salud';  _tx.common.health__disabilities = 'Capacidades especÃ­ficas';  _tx.common.health__doctor = 'MÃ©dico de familia';  _tx.common.health__gender = 'GÃ©nero';  _tx.common.help = 'Ayuda';  _tx.common.important_information = 'InformaciÃ³n importante';  _tx.common.incorrect = 'Incorrecto';  _tx.common.influences_academic_performance = 'Influye en el desempeÃ±o acadÃ©mico';  _tx.common.institution_not_have_period_visible = 'La instituciÃ³n no tiene visible el o los periodos =?= el contenido relacionado a estos no se podrÃ¡ visualizar.';  _tx.common.latex_equations = 'Ecuaciones LaTeX';  _tx.common.lesson = 'LecciÃ³n';  _tx.common.leveling_plu_cap = 'Recuperaciones';  _tx.common.leveling_plu_low = 'recuperaciones';  _tx.common.leveling_plu_upp = 'RECUPERACIONES';  _tx.common.leveling_sin_cap = 'RecuperaciÃ³n';  _tx.common.leveling_sin_low = 'recuperaciÃ³n';  _tx.common.leveling_sin_upp = 'RECUPERACIÃN';  _tx.common.link = 'Vincular';  _tx.common.logout_without_saving = 'Salir sin guardar';  _tx.common.logout = 'Salir';  _tx.common.mandatory_approval = 'Aprobacion obligatoria';  _tx.common.mandatory_enrollment = 'Matricula obligatoria';  _tx.common.massive_assignment_plu_cap = 'Actividades masivas';  _tx.common.massive_assignment_plu_low = 'actividades masivas';  _tx.common.massive_assignment_plu_upp = 'ACTIVIDADES MASIVAS';  _tx.common.massive_assignment_sin_cap = 'Actividad masiva';  _tx.common.massive_assignment_sin_low = 'actividad masiva';  _tx.common.massive_assignment_sin_upp = 'ACTIVIDAD MASIVA';  _tx.common.modify = 'Modificar';  _tx.common.month = 'Mes';  _tx.common.more_information = 'MÃ¡s informaciÃ³n';  _tx.common.more = 'mÃ¡s';  _tx.common.no = 'No';  _tx.common.none = 'Ninguno';  _tx.common.not_graded_abbr = 'Sin c.';  _tx.common.not_graded = 'No calificado';  _tx.common.online_exams = 'ExÃ¡menes';  _tx.common.only_numbers = 'sÃ³lo nÃºmeros';  _tx.common.optional = 'Opcional';  _tx.common.parent_assignment_plu_cap = 'Actividades padre';  _tx.common.parent_assignment_plu_low = 'actividades padre';  _tx.common.parent_assignment_plu_upp = 'ACTIVIDADES PADRE';  _tx.common.parent_assignment_sin_cap = 'Actividad padre';  _tx.common.parent_assignment_sin_low = 'actividad padre';  _tx.common.parent_assignment_sin_upp = 'ACTIVIDAD PADRE';  _tx.common.pause = 'Pausar';  _tx.common.pay = 'Pagar';  _tx.common.pdf_column_overflow_warning = 'Para generar el informe en PDF, debes incluir menos columnas, ya que con la cantidad actual la informaciÃ³n puede desbordarse del formato. Si necesitas incluir todas las columnas, te recomendamos generar el informe en Excel para una mejor visualizaciÃ³n.';  _tx.common.percentage_in_the_area = 'Porcentaje en el area';  _tx.common.please_click_to_dictate = 'Haga click para iniciar el dictado';  _tx.common.please_complete_the_information = 'Por favor completa la informaciÃ³n';  _tx.common.please_select = 'Por favor seleccione';  _tx.common.prepare = 'Preparar';  _tx.common.preview_file = 'Vista previa';  _tx.common.preview = 'Ver';  _tx.common.processing = 'Procesando';  _tx.common.reload = 'Recargar';  _tx.common.remove = 'Quitar';  _tx.common.retry = 'Reintentar';  _tx.common.role_10 = 'Personal de Plataforma';  _tx.common.role_100 = 'Secretaria(o) AcadÃ©mica(o)';  _tx.common.role_110 = 'Biblioteca';  _tx.common.role_111 = 'Psicologo';  _tx.common.role_112 = 'Psico-Orientador';  _tx.common.role_113 = 'EnfermerÃ­a';  _tx.common.role_120 = 'Director de Ãrea';  _tx.common.role_130 = 'Director de Grupo';  _tx.common.role_140 = 'Docente';  _tx.common.role_141 = 'Docente Especial';  _tx.common.role_150 = 'Estudiante';  _tx.common.role_160 = 'Acudiente';  _tx.common.role_170 = 'Asistente de MatrÃ­cula';  _tx.common.role_20 = 'Representante';  _tx.common.role_30 = 'Rector';  _tx.common.role_40 = 'Coordinador General';  _tx.common.role_50 = 'Coordinador AcadÃ©mico';  _tx.common.role_60 = 'Coordinador de Disciplina';  _tx.common.role_80 = 'Director TI';  _tx.common.role_90 = 'Director de Cartera';  _tx.common.save_and_continue = 'Guardar y continuar';  _tx.common.save = 'Guardar';  _tx.common.search = 'Buscar';  _tx.common.searching = 'Buscando';  _tx.common.send_code = 'Enviar cÃ³digo';  _tx.common.show_more = 'Mostrar mÃ¡s';  _tx.common.standard_indicator_plu_cap = 'Indicadores de desempeÃ±o';  _tx.common.standard_indicator_plu_low = 'indicadores de desempeÃ±o';  _tx.common.standard_indicator_plu_upp = 'INDICADORES DE DESEMPEÃO';  _tx.common.standard_indicator_sin_cap = 'Indicador de desempeÃ±o';  _tx.common.standard_indicator_sin_low = 'indicador de desempeÃ±o';  _tx.common.standard_indicator_sin_upp = 'INDICADOR DE DESEMPEÃO';  _tx.common.standard_plu_cap = 'DesempeÃ±os';  _tx.common.standard_plu_low = 'desempeÃ±os';  _tx.common.standard_plu_upp = 'DESEMPEÃOS';  _tx.common.standard_sin_cap = 'DesempeÃ±o';  _tx.common.standard_sin_low = 'desempeÃ±o';  _tx.common.standard_sin_upp = 'DESEMPEÃO';  _tx.common.standards_score_format = 'Formato de calificaciÃ³n de desempeÃ±os';  _tx.common.standards = 'DesempeÃ±os';  _tx.common.student_plu_cap = 'Estudiantes';  _tx.common.student_plu_low = 'estudiantes';  _tx.common.student_plu_upp = 'ESTUDIANTES';  _tx.common.student_sin_cap = 'Estudiante';  _tx.common.student_sin_low = 'estudiante';  _tx.common.student_sin_upp = 'ESTUDIANTE';  _tx.common.student = 'Estudiante';  _tx.common.subarea = 'Subarea';  _tx.common.subareas = 'SubÃ¡reas';  _tx.common.sync = 'Sincronizar';  _tx.common.tag = 'Etiqueta';  _tx.common.tags = 'Etiquetas';  _tx.common.template = 'Plantilla';  _tx.common.thank_you = 'Muchas gracias!';  _tx.common.there_is_no_data_to_display = 'No hay datos para mostrar';  _tx.common.these_fields_must_have_a_value = 'Los siguientes campos tienen que tener algÃºn valor';  _tx.common.these_records = 'estos registros';  _tx.common.this_resource_has_not_been_loaded_yet = 'Este elemento no se ha cargado aÃºn.';  _tx.common.to_view_document_on_cell_phone_need_rtf_format_reader = 'Para visualizar el documento en tu celular necesitas un lector de formato RTF';  _tx.common.update_settings = 'Actualizar configuraciÃ³n';  _tx.common.update = 'Actualizar';  _tx.common.upload_user_photos = 'Cargar fotos de usuarios';  _tx.common.upload = 'Cargar archivo';  _tx.common.uploading = 'Cargando';  _tx.common.wa_no_zone_has_been_selected = 'Ninguna zona ha sido seleccionada';  _tx.common.wa_nothing_to_show = 'No hay nada para mostrar';  _tx.common.wa_slow_action = 'La operaciÃ³n aÃºn no ha sido completada debido posiblemente a que su conexiÃ³n a internet se estÃ¡ cayendo.\nSi el problema persiste intente mÃ¡s tarde o escriba a SOPORTE';  _tx.common.wa_this_tool_is_temporarily_disabled = '<b>Esta funcionalidad esta desactivada debido a una revisiÃ³n de ingenierÃ­a. <br/>Revisa nuevamente en un par de horas. <br/>Agradecemos tu comprensiÃ³n.</b>';  _tx.common.wa_you_do_not_have_visibility_enabled_for_any_et = 'No tienes habilitada la visibilidad para ningÃºn periodo de evaluaciÃ³n.';  _tx.common.wa_you_have_not_selected_any_record = 'No has seleccionado ningÃºn registro';  _tx.common.wa_your_school_has_not_activated_this_service_yet = 'Este servicio no ha sido activado aÃºn en tu instituciÃ³n.';  _tx.common.wait_this_can_take_a_few_seconds = 'Por favor espera. Esto puede tomar unos segundos.';  _tx.common.wait_this_can_take_a_while = 'Por favor espera. Esto puede tomar un poco de tiempo.';  _tx.common.wait = 'Esperar';  _tx.common.warning = 'Advertencia';  _tx.common.week = 'Semana';  _tx.common.weekly_load = 'Intensidad horaria';  _tx.common.weighting_criteria = 'Criterio de ponderaciÃ³n';  _tx.common.weighting_elements = 'Elementos de ponderaciÃ³n';  _tx.common.what_do_you_want_to_do = 'Â¿QuÃ© quieres hacer?';  _tx.common.yes = 'Si'; if(typeof(top._tx)=='undefined'){top.eval('var _tx = top.text_handler;');}; $.each(_tx,function(k,v){if(typeof(top._tx[k]) == 'undefined'){top._tx[k] = _tx[k];}});if(typeof(_tx)=='undefined'){var _tx = top.text_handler;}; if(typeof(_tx.pagination)=='undefined'){_tx.pagination = {};};  _tx.pagination.from = 'del';  _tx.pagination.next = 'Siguiente';  _tx.pagination.of = 'de';  _tx.pagination.previous = 'Anterior';  _tx.pagination.reload_list = 'Recargar lista';  _tx.pagination.showing = 'Mostrando del';  _tx.pagination.to = 'al';  _tx.pagination.zero_results = 'No hay registros'; if(typeof(top._tx)=='undefined'){top.eval('var _tx = top.text_handler;');}; $.each(_tx,function(k,v){if(typeof(top._tx[k]) == 'undefined'){top._tx[k] = _tx[k];}});if(typeof(_tx)=='undefined'){var _tx = top.text_handler;}; if(typeof(_tx.grading_book)=='undefined'){_tx.grading_book = {};};  _tx.grading_book.already_has_one_report_for_this_et_but_was_on_a_previous_date = 'tiene reporte en este periodo de evaluaciÃ³n pero fuÃ© el =?=';  _tx.grading_book.already_has_one_report_for_this_et_in_this_date = 'ya tiene reporte en este periodo de evaluaciÃ³n con fecha =?=';  _tx.grading_book.already_has_one_report_for_this_et_without_date = 'ya tiene reporte en este periodo de evaluaciÃ³n. Pero el reporte no tiene fecha.';  _tx.grading_book.apply_cumulative_score = 'Aplicar calificaciÃ³n acumulada';  _tx.grading_book.apply_final_score = 'Aplicar calificaciÃ³n definitiva';  _tx.grading_book.assign_to_et_report = 'Hacer que el sistema asigne en el informe de periodo del estudiante la calificaciÃ³n que se ve en esta planilla.';  _tx.grading_book.assignments_with_equal_percentage = 'Cada actividad tiene un porcentaje equitativo';  _tx.grading_book.choose_a_column = 'Escoge una columna para reportar las calificaciones del periodo de evaluaciÃ³n';  _tx.grading_book.confirm_assignments_deletion = 'Â¿En realidad desea eliminar estas actividades?';  _tx.grading_book.confirm_reload = 'En realidad quieres recargar la planilla y descartar los cambios?';  _tx.grading_book.confirm_standards_deletion = 'Â¿Desea eliminar o desvincular estos desempeÃ±os y/o sus calificaciones?';  _tx.grading_book.confirm_standards_removal = 'Â¿Desea desvincular estos desempeÃ±os o borrar sus calificaciones?';  _tx.grading_book.cumulative_score_explanation_by_assignments = 'Esta columna muestra la calificaciÃ³n promedio de las actividades ya calificadas. No tiene en cuenta las celdas no calificadas.';  _tx.grading_book.cumulative_score_explanation_by_standards = 'Esta columna muestra la calificaciÃ³n promedio de los desempeÃ±os ya calificados. No tiene en cuenta las celdas no calificadas.';  _tx.grading_book.cumulative_score = 'CalificaciÃ³n Acumulada';  _tx.grading_book.delete_from_all_my_groups = 'Eliminar de todos mis grupos';  _tx.grading_book.delete_from_this_group = 'Eliminar solo de este grupo';  _tx.grading_book.delete_standards__completely = 'Eliminar los desempeÃ±os completamente';  _tx.grading_book.delete_standards__delete_all_sxe = 'Eliminar las calificaciones de estos desempeÃ±os en =?=';  _tx.grading_book.delete_standards__delete_selected_sxe = 'Eliminar las calificaciones de estos desempeÃ±os en =?= para los estudiantes seleccionados';  _tx.grading_book.delete_standards__remove_from_et_report = 'Retirar los desempeÃ±os de la planilla de =?=';  _tx.grading_book.delivery_mode_0 = 'Presencial';  _tx.grading_book.delivery_mode_1 = 'Virtual';  _tx.grading_book.do_not_delete = 'No eliminar';  _tx.grading_book.do_not_reload = 'No recargar';  _tx.grading_book.do_report_for_all_selected = 'Todos los estudiantes seleccionados';  _tx.grading_book.do_report_only_for_not_reported = 'SÃ³lo aquellos que no tienen reporte';  _tx.grading_book.er_a_very_high_percentage_of_new_values_are_null = 'El =|=% de las celdas modificadas (=|= celdas) pasan de tener una calificaciÃ³n a no tener ninguna. Por seguridad esto no es permitido.';  _tx.grading_book.er_branch_of_gxc_does_not_exist_in_table_at_x_branch = 'La sede de este grupo x curso no estÃ¡ registrada en la tabla de periodos acadÃ©micos x sede';  _tx.grading_book.er_delete_assignments_batch_delivery = 'No se puede eliminar porque hay actividades relacionadas con Entregas Virtuales.';  _tx.grading_book.er_delete_assignments_batch = 'Ha ocurrido un error al intentar eliminar las actividades. Recargue la lista de actividades.';  _tx.grading_book.er_express_et_report__percentages_do_not_sum_100 = 'Los porcentajes de las actividades no suman 100%.<br/>El reporte rÃ¡pido no se puede hacer.';  _tx.grading_book.er_parent_assignments_can_not_be_deleted_here = 'Las actividades masivas o padres no pueden ser eliminadas aquÃ­. Debe hacerlo un administrativo desde el mÃ³dulo de actividades masivas';  _tx.grading_book.er_saving_changes = 'OcurriÃ³ un error al guardar los cambios, porfavor informa a soporte tÃ©cnico. Disculpa las molestias.';  _tx.grading_book.er_setting_var_scores_decimals_has_not_been_defined = 'La variable "Cantidad de decimales en la nota de la asignatura" no ha sido definida.';  _tx.grading_book.er_setting_var_scores_rounding_mode_has_not_been_defined = 'La variable "Redondeo de calificaciones" no ha sido definida.';  _tx.grading_book.er_store_axe_scores = 'Los cambios a la planilla no han podido ser guardados.';  _tx.grading_book.er_the_scores_have_not_been_stored = 'Las calificaciones no han sido guardadas.';  _tx.grading_book.er_this_grading_book_may_have_been_open_in_another_window = 'Tal vez esta planilla ha sido abierta en otra ventana.';  _tx.grading_book.er_unselect_standard__is_already_graded = 'Este desempeÃ±o no se puede des-seleccionar porque ya fuÃ© calificado a =?= estudiantes';  _tx.grading_book.er_you_are_not_assigned_to_this_course = 'Usted no tiene asignado este curso';  _tx.grading_book.er_you_are_not_in_charge_of_this_course_or_area = 'Usted no estÃ¡ a cargo de este curso o Ã¡rea';  _tx.grading_book.er_you_dont_have_permissions_over_this_course = 'No tienes permisos para este curso.';  _tx.grading_book.er_you_dont_have_permissions_to_grade_assignments = 'No tienes permisos para calificar actividades.';  _tx.grading_book.et_report_not_reported_yet = 'No reportado aÃºn';  _tx.grading_book.et_report_of = 'Reporte de';  _tx.grading_book.et_score_status_explanation = 'Esta columna muestra si el estudiante tiene reporte de calificaciones. La cantidad de DesempeÃ±os reportados aparecerÃ¡ a la derecha.';  _tx.grading_book.et_scores_saved_successfully = 'et scores saved successfully';  _tx.grading_book.exp_export_pdf = 'Obtener esta planilla en PDF';  _tx.grading_book.exp_express_et_report = 'Realizar el reporte oficial de calificaciones tras terminar el periodo de evaluaciÃ³n.';  _tx.grading_book.exp_reload = 'Recargar la planilla y descartar los Ãºltimos cambios';  _tx.grading_book.exp_restore = 'Restaurar una Copia de Seguridad Previamente Generada.';  _tx.grading_book.exp_save_scores = 'Guardar las calificaciones que acabas de modificar';  _tx.grading_book.exp_there_are_unsaved_changes = 'Tienes cambios sin guardar. Al terminar no olvides presionar este botÃ³n.';  _tx.grading_book.exp_upload_excel_grading_book = 'Subir planilla de actividades excel';  _tx.grading_book.express_et_report = 'Reporte final de PE';  _tx.grading_book.final_score_explanation_by_assignments = 'Esta columna muestra la calificaciÃ³n promedio de todas las actividades sin importar si ya fueron calificadas o no.';  _tx.grading_book.final_score_explanation_by_standards = 'Esta columna muestra la calificaciÃ³n promedio de todos los desempeÃ±os sin importar si ya fueron calificados o no.';  _tx.grading_book.final_score = 'CalificaciÃ³n Definitiva';  _tx.grading_book.final_scores_to_show__calculated = 'Ver calculadas';  _tx.grading_book.final_scores_to_show__enable_calculated = 'Modificar calificaciones finales';  _tx.grading_book.final_scores_to_show__reported = 'Ver reportadas';  _tx.grading_book.final_scores_to_show = 'Calificaciones finales';  _tx.grading_book.following_students_already_have_reports = 'Los siguientes estudiantes ya tienen reportes';  _tx.grading_book.gce_req_type_homologated = 'Homologado';  _tx.grading_book.grading_book_not_saved = 'Cambios no almacenados';  _tx.grading_book.ok_store_axe_scores = 'Se han GUARDADO los cambios hechos a la planilla.\nLe recomendamos guardar el comprobante de la acciÃ³n: =?=-=?=';  _tx.grading_book.ok_store_scores = 'Se han GUARDADO los cambios hechos a la planilla.';  _tx.grading_book.reload_and_discard_changes = 'Recargar y descartar cambios';  _tx.grading_book.reload_and_save_changes = 'Guardar cambios';  _tx.grading_book.report_et_scores = 'Reportar informes de periodo';  _tx.grading_book.saving_changes = 'Guardando los cambios';  _tx.grading_book.status_cancelled = 'Cancelado';  _tx.grading_book.status_deserter = 'Desertor';  _tx.grading_book.status_promoted_anticipatedly = 'Promovido anticipadamente';  _tx.grading_book.tip_do_not_edit_forbidden_cells__1 = '1. La plataforma solo reconocerÃ¡ los cambios en las celdas que tienen fondo blanco. No debes editar celdas con otro color de fondo, ya que se calcularÃ¡n automÃ¡ticamente.';  _tx.grading_book.tip_do_not_edit_forbidden_cells__2 = '2. No debes cambiar el color de fondo de las celdas.';  _tx.grading_book.tip_do_not_edit_forbidden_cells__3 = '3. No debes alterar las filas 1 y 2, ni las columnas A a la D.';  _tx.grading_book.tip_do_not_edit_forbidden_cells__4 = 'Dichas columnas y filas contienen los cÃ³digos de las actividades y estudiantes, utilizados para almacenar las calificaciones.';  _tx.grading_book.tip_do_not_edit_forbidden_cells__title = 'PARA SUBIR CALIFICACIONES DESDE ESTE ARCHICO:';  _tx.grading_book.tip_final_scores__calculated__explanation_1 = '<b>Calificaciones finales calculadas:</b> Calificaciones en tiempo real del curso y logros si estos se utilizan. Las calificaciones calculadas se obtienen a partir de las calificaciones de actividades en la planilla, por lo tanto, cualquier cambio en las celdas de actividades los afectarÃ¡.';  _tx.grading_book.tip_final_scores__reported__explanation_1 = '<b>Calificaciones finales reportadas:</b> Si ya hiciste previamente un reporte final del periodo de evaluaciÃ³n, esta opciÃ³n mostrarÃ¡ esas calificaciones que ya han sido reportadas. Si cambias la calificaciÃ³n de actividades, las celdas de logros, calificaciÃ³n acumulada y calificaciÃ³n definitiva no se verÃ¡n afectadas.';  _tx.grading_book.tip_final_scores__reported__explanation_2 = 'Se estÃ¡ mostrando la calificaciÃ³n final <b>reportada</b> del curso y los desempeÃ±os, es decir, lo que estÃ¡ actualmente en la base de datos.';  _tx.grading_book.tip_final_scores__reported__explanation_3 = 'Si has hecho cambios en la calificaciÃ³n de actividades y deseas actualizar tu reporte, es necesario que los desempeÃ±os y la calificaciÃ³n del curso se re-calculen nuevamente a partir de las actividades.';  _tx.grading_book.tip_final_scores__reported__explanation_4 = 'Siempre podrÃ¡s cambiar tu selecciÃ³n como se indica en la imagen:';  _tx.grading_book.tip_removing_a_standard_will_delete_all_sxe = 'Si retiras un desempeÃ±o, obligatoriamente se eliminarÃ¡n sus calificaciones para todos los estudiantes.';  _tx.grading_book.tip_students_must_have_same_standards = 'SegÃºn la configuraciÃ³n, los estudiantes no pueden tener desempeÃ±os diferentes.';  _tx.grading_book.tip_which_are_the_selected_cells = 'CuÃ¡les son las celdas seleccionadas?';  _tx.grading_book.tip_you_have_not_defined_standard_weighting = 'No has definido como se calcularÃ¡ la <b>calificaciÃ³n</b> de este desempeÃ±o';  _tx.grading_book.tool_batch_grading__do_you_want_to_activate = 'Deseas activar la calificaciÃ³n masiva?';  _tx.grading_book.tool_batch_grading__explanation_1 = 'Al activar esta opciÃ³n puedes clonar la calificaciÃ³n que apliques a una celda, a todas las celdas que estÃ©n cruzadas, es decir, que correspondan a la vez a una fila y una columna seleccionada.';  _tx.grading_book.tool_batch_grading__explanation_2 = 'Cuando activas la opciÃ³n de <b>Calificar varias celdas a la vez</b>, a todas las celdas cruzadas se aplicarÃ¡ la misma calificaciÃ³n que apliques a cualquiera de ellas.<br/><br/>Dichas celdas corresponden a la intersecciÃ³n entre una actividad seleccionada y un estudiante seleccionado y tienen <b><span style=\'background-color:FFCC44;\'>fondo de color naranja</span></b>';  _tx.grading_book.tool_batch_grading = 'Calificar varias celdas a la vez';  _tx.grading_book.tool_grid_filter = 'Fitrar columnas';  _tx.grading_book.tool_maximize = 'Maximizar Ã¡rea de trabajo';  _tx.grading_book.tool_microphone__do_you_want_to_activate = 'Deseas activar la calificaciÃ³n por micrÃ³fono?';  _tx.grading_book.tool_microphone__explanation = 'Al activar esta opciÃ³n puedes calificar con tu voz. Para ello:<br/>1. Ubica el cursor en una celda.<br/>2. Presiona y <b>suelta</b> la tecla <b>CTRL</b>.<br/>3. Pronuncia la calificaciÃ³n que quieres asignar.';  _tx.grading_book.tool_microphone__you_can_talk_now = 'Puedes hablar ahora.';  _tx.grading_book.tool_microphone = 'Usar micrÃ³fono';  _tx.grading_book.tool_minimize = 'Reestablecer Ã¡rea de trabajo';  _tx.grading_book.tool_select_students = 'Seleccionar estudiantes';  _tx.grading_book.tool_settings__final_scores_to_show__explanation = 'Â¿QuÃ© calificaciones se deben mostrar bajo las columnas de cada desempeÃ±o y la columna CalificaciÃ³n Definitiva?<br/><br/>Si deseas hacer cambios en las calificaciones finales, debes seleccionar <b>Ver calculadas</b><br/><br/>Si deseas verificar el reporte que estÃ¡ almacenado para cada estudiante, debes seleccionar <b>Ver reportadas</b>';  _tx.grading_book.tool_settings = 'ConfiguraciÃ³n';  _tx.grading_book.tool_statistics = 'EstadÃ­sticas de actividades';  _tx.grading_book.tooltip_delete_standards__completely = '<b>ADVERTENCIA:</b> Al activar esta opciÃ³n, los desempeÃ±os seleccionados <b>se eliminarÃ¡n completamente</b> incluyendo su definiciÃ³n y calificaciones de esta y todas las planillas en donde estÃ© presente para cualquier docente y periodo que lo estÃ© utilizando.';  _tx.grading_book.tooltip_delete_standards__delete_all_sxe = 'Elimina las calificaciones de la planilla actual para los desempeÃ±os seleccionados y <b>para todos los estudiantes</b>. Esta opciÃ³n no retira los desempeÃ±os de la planilla de actividades, por lo que seguirÃ¡s viendo calificaciones calculadas.';  _tx.grading_book.tooltip_delete_standards__delete_selected_sxe = 'Elimina las calificaciones de la planilla actual para los desempeÃ±os seleccionados y <b>Ãºnicamente para los estudiantes seleccionados</b>. Esta opciÃ³n no retira los desempeÃ±os de la planilla de actividades, por lo que seguirÃ¡s viendo calificaciones calculadas.';  _tx.grading_book.tooltip_delete_standards__remove_from_et_report = 'Esta opciÃ³n permite <b>retirar los desempeÃ±os de la planilla actual</b> pero no los elimina de la base de datos ni elimina tampoco las calificaciones que ya le hayan sido reportadas a los estudiantes.';  _tx.grading_book.upload_scores_file = 'Subir archivo de calificaciones';  _tx.grading_book.wa_a_new_upgrade_requires_to_reload = 'Es necesario recargar tu interfaz para cargar una actualizaciÃ³n. Disculpa las molestias.';  _tx.grading_book.wa_course_without_parent_assignments_1 = 'Puedes crearlas en el botÃ³n <b>Agregar</b>.';  _tx.grading_book.wa_course_without_parent_assignments_2 = 'Un administrativo debe crearlas o darte permisos.';  _tx.grading_book.wa_course_without_parent_assignments = 'DeberÃ­a haber al menos una columna con jerarquÃ­a <b>=?=</b>, pero no hay ninguna.';  _tx.grading_book.wa_no_assignments_selected = 'Por favor selecciona al menos una actividad';  _tx.grading_book.wa_no_influences_selected = 'Si no has seleccionado influencias para los desempeÃ±os, esa misma calificaciÃ³n serÃ¡ aplicada a cada desempeÃ±o.';  _tx.grading_book.wa_no_standards_selected = 'Por favor selecciona al menos un logro';  _tx.grading_book.wa_no_students_selected = 'Por favor selecciona al menos un estudiante';  _tx.grading_book.wa_percentages_must_sum_100 = 'Los porcentajes suman =|=%. Deben sumar 100% antes de continuar';  _tx.grading_book.wa_sheet_has_no_changes = 'Las Ãºltimas calificaciones almacenadas son las que estÃ¡ viendo';  _tx.grading_book.you_can_see_the_results_in_et_reports_menu = 'Puedes revisar los resultados en el menÃº Informes de Periodo'; if(typeof(top._tx)=='undefined'){top.eval('var _tx = top.text_handler;');}; $.each(_tx,function(k,v){if(typeof(top._tx[k]) == 'undefined'){top._tx[k] = _tx[k];}}); var framework_scripts_loaded = true;